# Vertex AI Imagen MCP Server

[![npm version](https://img.shields.io/npm/v/@dondonudonjp/vertexai-imagen-mcp-server.svg)](https://www.npmjs.com/package/@dondonudonjp/vertexai-imagen-mcp-server)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![npm downloads](https://img.shields.io/npm/dm/@dondonudonjp/vertexai-imagen-mcp-server.svg)](https://www.npmjs.com/package/@dondonudonjp/vertexai-imagen-mcp-server)

**ğŸ†• Latest Update (v0.6.0)**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä¿å­˜å…ˆã‚’ç”»åƒå‡ºåŠ›å…ˆé…ä¸‹ã«å¤‰æ›´ï¼ˆ`[VERTEXAI_IMAGEN_OUTPUT_DIR]/templates`ï¼‰

Vertex AI ã® Imagen API ã‚’ä½¿ç”¨ã—ã¦ç”»åƒã‚’ç”Ÿæˆãƒ»ç·¨é›†ã§ãã‚‹ MCPï¼ˆModel Context Protocolï¼‰å¯¾å¿œã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚Claude Desktop ãªã©ã® MCP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨é€£æºã™ã‚‹ã“ã¨ã§ã€ãƒãƒ£ãƒƒãƒˆå†…ã‹ã‚‰è‡ªç„¶è¨€èªã§é«˜åº¦ãªç”»åƒæ“ä½œãŒè¡Œãˆã¾ã™ã€‚

---

## ğŸŒŸ ä¸»ãªæ©Ÿèƒ½

- ğŸ¨ **ç”»åƒç”Ÿæˆ**ï¼šãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰é«˜å“è³ªãªç”»åƒã‚’ç”Ÿæˆ
- âœ¨ **ç”»åƒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºï¼ˆNEW!ï¼‰**ï¼šå‚ç…§ç”»åƒã‚’ä½¿ã£ãŸé«˜åº¦ãªç”»åƒç”Ÿæˆï¼ˆæ§‹é€ åˆ¶å¾¡ã€è¢«å†™ä½“ä¸€è²«æ€§ã€ã‚¹ã‚¿ã‚¤ãƒ«è»¢é€ï¼‰
- ğŸ“ **YAMLè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å¯¾å¿œï¼ˆNEW!ï¼‰**ï¼šè¤‡é›‘ãªã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’YAMLã§ç®¡ç†ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå†åˆ©ç”¨ãŒå¯èƒ½
- âœ‚ï¸ **é«˜åº¦ãªç”»åƒç·¨é›†**ï¼šAIãƒã‚¹ã‚¯ç”Ÿæˆã€ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ç·¨é›†ã€èƒŒæ™¯ç½®æ›å¯¾å¿œ
- ğŸ­ **ãƒã‚¹ã‚¯ãªã—ç·¨é›†**ï¼šãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã¿ã§ç°¡å˜ã«ç”»åƒç·¨é›†
- ğŸ¯ **5ã¤ã®ãƒã‚¹ã‚¯ãƒ¢ãƒ¼ãƒ‰**ï¼šãƒã‚¹ã‚¯ãƒ•ãƒªãƒ¼ã€æ‰‹å‹•ãƒã‚¹ã‚¯ã€èƒŒæ™¯è‡ªå‹•æ¤œå‡ºã€å‰æ™¯è‡ªå‹•æ¤œå‡ºã€ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯åˆ†å‰²
- ğŸ”„ **å¤šæ§˜ãªç·¨é›†ãƒ¢ãƒ¼ãƒ‰**ï¼šã‚¤ãƒ³ãƒšã‚¤ãƒ³ãƒˆé™¤å»ã€ã‚¤ãƒ³ãƒšã‚¤ãƒ³ãƒˆæŒ¿å…¥ã€èƒŒæ™¯ç½®æ›ã€ã‚¢ã‚¦ãƒˆãƒšã‚¤ãƒ³ãƒ†ã‚£ãƒ³ã‚°
- ğŸ“ **ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ã®æŒ‡å®š**ï¼š1:1, 3:4, 4:3, 9:16, 16:9 ã«å¯¾å¿œ
- ğŸ” **ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°**ï¼šç”»åƒã‚’ 2 å€ã¾ãŸã¯ 4 å€ã«é«˜å“è³ªæ‹¡å¤§
- âš¡ **çµ±åˆå‡¦ç†**ï¼šç”Ÿæˆã¨æ‹¡å¤§ã‚’ä¸€æ‹¬å®Ÿè¡Œ
- ğŸ›¡ï¸ **å®‰å…¨æ€§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼**ï¼šå®‰å…¨ãƒ¬ãƒ™ãƒ«ã‚’æŸ”è»Ÿã«åˆ¶å¾¡
- ğŸ‘¤ **äººç‰©ç”Ÿæˆåˆ¶å¾¡**ï¼šäººç‰©ã®ç”Ÿæˆæœ‰ç„¡ã‚’ç´°ã‹ãè¨­å®š
- ğŸ“ **ç”»åƒç®¡ç†**ï¼šç”Ÿæˆæ¸ˆã¿ç”»åƒã®ä¸€è¦§è¡¨ç¤ºãƒ»æ“ä½œ
- ğŸ·ï¸ **ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ã‚¯ãƒ©ã‚¹IDæ¤œç´¢**ï¼šç”»åƒç·¨é›†ç”¨ã®194ç¨®é¡ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¯ãƒ©ã‚¹ã‚’ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢
- ğŸ”— **MCP Resources API**ï¼šfile:// URI ã«ã‚ˆã‚‹åŠ¹ç‡çš„ãªç”»åƒé…ä¿¡ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ã‚’å¤§å¹…å‰Šæ¸›ï¼‰
- ğŸ”¢ **è‡ªå‹•ãƒ•ã‚¡ã‚¤ãƒ«åç®¡ç†**ï¼šé‡è¤‡æ™‚ã®è‡ªå‹•é€£ç•ªä»˜åŠ ã§æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿è­·
- ğŸ”§ **ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰**ï¼šãƒ­ã‚°å‡ºåŠ›ã«ã‚ˆã‚‹ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆæ”¯æ´

---

## ğŸ“‹ å‰ææ¡ä»¶

- **Node.js** v18 ä»¥ä¸Š  
- **MCP å¯¾å¿œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ**ï¼ˆä¾‹ï¼šClaude Desktopã€Claude Codeï¼‰

---

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. èªè¨¼æ–¹å¼ã®é¸æŠ

ã“ã®MCPã‚µãƒ¼ãƒãƒ¼ã¯ã€2ã¤ã®èªè¨¼æ–¹å¼ã«å¯¾å¿œã—ã¦ã„ã¾ã™ï¼š

#### A. API KEYèªè¨¼ï¼ˆãƒ†ã‚¹ãƒˆãƒ»é–‹ç™ºç”¨ï¼‰â­ **æ¨å¥¨ï¼šåˆå¿ƒè€…å‘ã‘**

**ãƒ¡ãƒªãƒƒãƒˆ:**
- âœ… è¨­å®šãŒç°¡å˜ï¼ˆã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ä¸è¦ï¼‰
- âœ… Vertex AI Studioã‹ã‚‰æ•°ç§’ã§å–å¾—å¯èƒ½
- âœ… ãƒ†ã‚¹ãƒˆãƒ»ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã«æœ€é©

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:**
- âš ï¸ æœ¬ç•ªç’°å¢ƒã«ã¯éæ¨å¥¨ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®ç†ç”±ï¼‰
- âš ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã®æ‰‹å‹•è¨­å®šãŒå¿…è¦
- âš ï¸ **QUOTAåˆ¶é™ãŒå­˜åœ¨ã™ã‚‹**ï¼ˆè©³ç´°ã¯ä¸‹è¨˜å‚ç…§ï¼‰

#### âš ï¸ API KEYä½¿ç”¨æ™‚ã®QUOTAåˆ¶é™ã«ã¤ã„ã¦

API KEYã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€Vertex AIã«ã¯**ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã®ä¸Šé™ï¼ˆQuotaï¼‰**ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚

**Quotaåˆ¶é™ã‚¨ãƒ©ãƒ¼ã®ä¾‹:**
```
Quota exceeded for aiplatform.googleapis.com/online_prediction_requests_per_base_model
with base model: imagen-3.0-generate. Please submit a quota increase request.
https://cloud.google.com/vertex-ai/docs/generative-ai/quotas-genai.
```

**å¯¾å‡¦æ–¹æ³•:**

1. **Quotaå¢—åŠ ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**
   - [Vertex AI Quotas ãƒšãƒ¼ã‚¸](https://cloud.google.com/vertex-ai/docs/generative-ai/quotas-genai)ã«ã‚¢ã‚¯ã‚»ã‚¹
   - Google Cloud Consoleã§Quotaå¢—åŠ ã‚’ç”³è«‹
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç”¨é€”ã‚’èª¬æ˜ã—ã¦æ‰¿èªã‚’å¾…ã¤

2. **ä½¿ç”¨é‡ã®ç®¡ç†**
   - ç”»åƒç”Ÿæˆã®é »åº¦ã‚’èª¿æ•´
   - ä¸è¦ãªãƒªãƒˆãƒ©ã‚¤ã‚’é¿ã‘ã‚‹
   - `sample_count` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æœ€å°é™ã«è¨­å®š

3. **ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆèªè¨¼ã¸ã®ç§»è¡Œã‚’æ¤œè¨**
   - æœ¬ç•ªç’°å¢ƒã§ã¯ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆèªè¨¼ã®ä½¿ç”¨ã‚’æ¨å¥¨
   - ã‚ˆã‚Šé«˜ã„Quotaã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãŒæä¾›ã•ã‚Œã‚‹

> ğŸ’¡ **ãƒ’ãƒ³ãƒˆ**: é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆæ™‚ã¯API KEYã§æ‰‹è»½ã«å§‹ã‚ã€æœ¬ç•ªé‹ç”¨æ™‚ã¯ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆèªè¨¼ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

---

#### B. ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆèªè¨¼ï¼ˆæœ¬ç•ªç’°å¢ƒç”¨ï¼‰

**ãƒ¡ãƒªãƒƒãƒˆ:**
- âœ… æœ¬ç•ªç’°å¢ƒæ¨å¥¨
- âœ… ã‚ˆã‚Šå¼·å›ºãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- âœ… ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDè‡ªå‹•æ¤œå‡º

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:**
- âš ï¸ è¨­å®šãŒã‚„ã‚„è¤‡é›‘ï¼ˆã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¨é…ç½®ãŒå¿…è¦ï¼‰
- âš ï¸ IAMæ¨©é™ã®è¨­å®šãŒå¿…è¦

---

### 1-A. API KEYèªè¨¼ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆæ¨å¥¨ï¼šåˆå¿ƒè€…å‘ã‘ï¼‰

#### æ‰‹é †æ¦‚è¦

1. [Vertex AI Studio](https://console.cloud.google.com/vertex-ai/generative/language) ã¸ã‚¢ã‚¯ã‚»ã‚¹
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã¾ãŸã¯é¸æŠ
3. ã€ŒGet API Keyã€ã‚’ã‚¯ãƒªãƒƒã‚¯
4. è¡¨ç¤ºã•ã‚ŒãŸAPI KEYã‚’ã‚³ãƒ”ãƒ¼
5. [Google Cloud Console](https://console.cloud.google.com/)ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã‚’ç¢ºèªï¼ˆç”»é¢ä¸Šéƒ¨ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã®æ¨ªã«è¡¨ç¤ºï¼‰

> ğŸ’¡ **ãƒ’ãƒ³ãƒˆ**: API KEYã¯ `AIzaSy...` ã§å§‹ã¾ã‚‹æ–‡å­—åˆ—ã§ã™ã€‚

#### è¨­å®šä¾‹ï¼ˆClaude Desktopï¼‰

```json
{
  "mcpServers": {
    "google-imagen": {
      "command": "vertexai-imagen-mcp-server",
      "env": {
        "GOOGLE_API_KEY": "AIzaSy...",
        "GOOGLE_PROJECT_ID": "your-project-id"
      }
    }
  }
}
```

> ğŸ” **æ³¨æ„**: API KEYã¯æ©Ÿå¯†æƒ…å ±ã§ã™ã€‚ç¬¬ä¸‰è€…ã«å…¬é–‹ã—ãªã„ã§ãã ã•ã„ã€‚

---

### 1-B. ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆèªè¨¼ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆæœ¬ç•ªç’°å¢ƒç”¨ï¼‰

#### æ‰‹é †æ¦‚è¦

1. [Google Cloud Console](https://console.cloud.google.com/) ã¸ã‚¢ã‚¯ã‚»ã‚¹
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã¾ãŸã¯é¸æŠ
3. ã€ŒAPIã¨ã‚µãƒ¼ãƒ“ã‚¹ã€â†’ã€Œãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€ã§ `Vertex AI API` ã‚’æœ‰åŠ¹åŒ–
4. ã€ŒIAMã¨ç®¡ç†ã€â†’ã€Œã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€â†’ã€Œã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã€
5. åå‰ï¼ˆä¾‹ï¼š`imagen-mcp-server`ï¼‰ã‚’å…¥åŠ›
6. ãƒ­ãƒ¼ãƒ«ã¯ã€Œ**Vertex AI ãƒ¦ãƒ¼ã‚¶ãƒ¼**ã€ã‚’é¸æŠã—ä½œæˆ
7. ä½œæˆå¾Œã€ã€Œã‚­ãƒ¼ã€ã‚¿ãƒ–ã‹ã‚‰ã€Œæ–°ã—ã„ã‚­ãƒ¼ã‚’ä½œæˆã€â†’ã€ŒJSONã€å½¢å¼ã‚’é¸ã³ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

> ğŸ” **æ³¨æ„**ï¼šãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã‚­ãƒ¼ã¯å³é‡ã«ä¿ç®¡ã—ã¦ãã ã•ã„ã€‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†å¯¾è±¡å¤–ã«ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

---

### 2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
npm install -g @dondonudonjp/vertexai-imagen-mcp-server

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã€ä½¿ç”¨æº–å‚™å®Œäº†
````

---

### 3. ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ã®é…ç½®

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›´ä¸‹ã«é…ç½®ã™ã‚‹ä¾‹
cp /path/to/key.json ./google-service-account.json

# config ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸é…ç½®ã™ã‚‹ä¾‹
mkdir -p ~/.config/google-cloud/
cp /path/to/key.json ~/.config/google-cloud/imagen-service-account.json

# ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ï¼ˆUNIXç’°å¢ƒæ¨å¥¨ï¼‰
chmod 600 ./google-service-account.json
```

---

### 4. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

#### A. NPM ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ¨å¥¨ï¼‰

```bash
npm install -g @dondonudonjp/vertexai-imagen-mcp-server
vertexai-imagen-mcp-server --version
```

#### B. é–‹ç™ºãƒªãƒ³ã‚¯ï¼ˆnpm linkï¼‰

```bash
npm link
vertexai-imagen-mcp-server --version
```

#### C. Claude Desktop ã«ç›´æ¥ãƒ‘ã‚¹ã‚’æŒ‡å®š

```json
{
  "mcpServers": {
    "google-imagen": {
      "command": "node",
      "args": ["C:\\projects\\vertexai-imagen-mcp-server\\build\\index.js"],
      "env": {
        "GOOGLE_APPLICATION_CREDENTIALS": "C:\\path\\to\\your\\key.json"
      }
    }
  }
}
```

---

## âš™ Claude Desktop ã®è¨­å®š

### æ¨å¥¨è¨­å®šï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’æŒ‡å®šï¼‰

```json
{
  "mcpServers": {
    "google-imagen": {
      "command": "vertexai-imagen-mcp-server",
      "env": {
        "GOOGLE_APPLICATION_CREDENTIALS": "/path/to/google-service-account.json"
      }
    }
  }
}
```

> Windowsç’°å¢ƒã§ã¯ãƒ‘ã‚¹åŒºåˆ‡ã‚Šã«æ³¨æ„ï¼š
> `"C:\\Users\\User\\Documents\\key.json"`

---

### Claude Desktop ã®å†èµ·å‹•

è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜å¾Œã€Claude Desktop ã‚’**å®Œå…¨ã«å†èµ·å‹•**ã—ã¦ãã ã•ã„ï¼ˆã‚¿ã‚¹ã‚¯ãƒˆãƒ¬ã‚¤ã‹ã‚‰ã‚‚çµ‚äº†æ¨å¥¨ï¼‰ã€‚

---
### Claude Code ã§ã®ä½¿ç”¨æ–¹æ³•

[Claude Code](https://claude.ai/code) ã§ã‚‚åŒæ§˜ã«MCPã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦ä½¿ç”¨ã§ãã¾ã™ã€‚

#### è¨­å®šæ–¹æ³•

Claude Code ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ï¼š

```json
{
  "mcpServers": {
    "google-imagen": {
      "command": "cmd",
      "args": ["/c", "npx", "-y", "@dondonudonjp/vertexai-imagen-mcp-server"],
      "env": {
        "GOOGLE_APPLICATION_CREDENTIALS": "C:\\path\\to\\your\\google-service-account.json"
      }
    }
  }
}
```

**macOS/Linux ã®å ´åˆ:**
```json
{
  "mcpServers": {
    "google-imagen": {
      "command": "npx",
      "args": ["-y", "@dondonudonjp/vertexai-imagen-mcp-server"],
      "env": {
        "GOOGLE_APPLICATION_CREDENTIALS": "/path/to/your/google-service-account.json"
      }
    }
  }
}
```

## ğŸ§ª ä½¿ç”¨ä¾‹ï¼ˆClaude æŒ‡ç¤ºæ–‡ï¼‰
è‡ªç„¶è¨€èªã§æŒ‡ç¤ºã™ã‚‹ã ã‘ã§ç”»åƒç”Ÿæˆãƒ»ç·¨é›†ãƒ»ç®¡ç†ã‚’è¡Œãˆã¾ã™ã€‚
ç”»åƒã¯è‡ªå‹•çš„ã« `~/Downloads/vertexai-imagen-files/` ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

### ğŸŸ¦ â… . åŸºæœ¬ç”Ÿæˆï¼ˆGenerateï¼‰
#### ä¾‹1ï¼šã‚·ãƒ³ãƒ—ãƒ«ç”Ÿæˆ
```text
ã€Œç¾ã—ã„å¤•æ—¥ã®é¢¨æ™¯ã€ã‚’ãƒ†ãƒ¼ãƒã«ç”»åƒã‚’ç”Ÿæˆã—ã€æ¨ªé•·ã® 16:9 æ¯”ç‡ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚
äººç‰©ã¯å«ã‚ãšã€å®‰å…¨æ€§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã¯æ¨™æº–ï¼ˆä¸­ãƒªã‚¹ã‚¯ä»¥ä¸Šã‚’ãƒ–ãƒ­ãƒƒã‚¯ï¼‰ã§ã€‚
ä¿å­˜ãƒ•ã‚¡ã‚¤ãƒ«åã¯ sunset_landscape.png ã¨ã—ã¦ãã ã•ã„ã€‚
```
#### ğŸ“¸ å‡ºåŠ›ä¾‹
![ä¾‹1](./docs/images/sunset_landscape.png)
---

#### ä¾‹2ï¼šäººç‰©ãƒãƒ¼ãƒˆãƒ¬ãƒ¼ãƒˆï¼ˆæˆäººè¨±å¯ï¼‰

```text
äººç‰©ã®ãƒãƒ¼ãƒˆãƒ¬ãƒ¼ãƒˆã‚’ç¸¦é•·ï¼ˆ3:4ï¼‰ã§ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
æˆäººã®ã¿è¨±å¯ã—ã€å®‰å…¨æ€§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã¯é«˜ãƒªã‚¹ã‚¯ã®ã¿ãƒ–ãƒ­ãƒƒã‚¯ã€‚
ä¿å­˜å…ˆã¯ portrait_adult.png ã«ã—ã¦ãã ã•ã„ã€‚
```

#### ğŸ“¸ å‡ºåŠ›ä¾‹

![portrait\_adult](./docs/images/portrait_adult.png)

---
#### ä¾‹3ï¼šè‹±èªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ¯”è¼ƒ

```text
language: "en"
Prompt: "A tranquil forest with sunbeams filtering through the trees"
ä¿å­˜å…ˆã¯ forest_en.png ã«ã—ã¦ãã ã•ã„ã€‚
```

#### ğŸ“¸ å‡ºåŠ›ä¾‹

![forest\_en](./docs/images/forest_en.png)
---

### ğŸŸ¦ â…¡. ç”»åƒç·¨é›†ï¼ˆEditï¼‰

#### ä¾‹4ï¼šèƒŒæ™¯å¤‰æ›´ï¼ˆäººç‰©â†’æ£®ï¼‰

```text
[reference_image_path ã‚’æŒ‡å®š]
ã“ã®äººç‰©ã®èƒŒæ™¯ã‚’æ£®ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚
mask_mode: background
edit_mode: bgswap
ä¿å­˜å…ˆã¯ forest_background.png ã«ã—ã¦ãã ã•ã„ã€‚
```

#### ğŸ“¸ å…¥åŠ›ç”»åƒ

![ä¾‹4ã®å…¥åŠ›ç”»åƒ](./docs/images/generated_image_6a.png)

#### ğŸ“¸ å‡ºåŠ›ä¾‹

![forest\_background](./docs/images/forest_background.png)

---
#### ä¾‹5ï¼šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆé™¤å»

```text
[reference_image_path ã‚’æŒ‡å®š]
ãƒªãƒ“ãƒ³ã‚°ã®å†™çœŸã‹ã‚‰ã‚½ãƒ•ã‚¡ä¸Šã®ã‚¯ãƒƒã‚·ãƒ§ãƒ³ã‚’é™¤å»ã—ã¦ãã ã•ã„ã€‚
mask_mode: foreground
edit_mode: inpaint_removal
ä¿å­˜å…ˆã¯ clean_sofa.png ã«ã—ã¦ãã ã•ã„ã€‚
```
#### ğŸ“¸ å…¥åŠ›ç”»åƒ

![ä¾‹5ã®å…¥åŠ›ç”»åƒ](./docs/images/sofa_cushion.png)
#### ğŸ“¸ å‡ºåŠ›ä¾‹

![clean\_sofa](./docs/images/clean_sofa.png)
(ï¿£â–¡ï¿£;)!!
---

#### ä¾‹6ï¼šæœè£…å¤‰æ›´ï¼ˆã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ç·¨é›†ï¼‰

```text
[reference_image_path ã‚’æŒ‡å®š]
ã“ã®å¥³æ€§ã®æœè£…ã ã‘ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒ«ãªãƒ“ã‚¸ãƒã‚¹ã‚¹ãƒ¼ãƒ„ã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚é¡”ã€é«ªå‹ã€è¡¨æƒ…ã€ãƒãƒ¼ã‚ºã€èƒŒæ™¯ã¯ãã®ã¾ã¾ç¶­æŒã—ã¦ãã ã•ã„ã€‚ç´ºè‰²ã¾ãŸã¯é»’ã®ã‚¸ãƒ£ã‚±ãƒƒãƒˆã¨ãƒ‘ãƒ³ãƒ„ã®ã‚¹ãƒ¼ãƒ„ã§ã€ã‚¤ãƒ³ãƒŠãƒ¼ã¯ç™½ã„ãƒ–ãƒ©ã‚¦ã‚¹ã€‚ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã§æ´—ç·´ã•ã‚ŒãŸå°è±¡ã€‚
ä¿å­˜å…ˆã¯ formal_outfit.pngã«ã—ã¦ãã ã•ã„ã€‚
mask_mode: "semantic"
mask_classes: [125] (äººç‰©)
edit_mode: "inpaint_insertion"
mask_dilation: 0.05
```
#### ğŸ“¸ å…¥åŠ›ç”»åƒ

![ä¾‹6ã®å…¥åŠ›ç”»åƒ](./docs/images/cafe_woman_casual.png)
#### ğŸ“¸ å‡ºåŠ›ä¾‹

![clean\_sofa](./docs/images/formal_outfit_1.png)
(ï¿£â–¡ï¿£;)!!
---

#### ä¾‹7ï¼šãƒã‚¹ã‚¯ãªã—ç·¨é›†ï¼ˆMask-Freeï¼‰

```text
[reference_image_path ã‚’æŒ‡å®š]
ã“ã®çŒ«ã®å†™çœŸã‚’åŒã˜æ§‹å›³ã§çŠ¬ã«å¤‰ãˆã¦ãã ã•ã„ã€‚
mask_mode ã¯æŒ‡å®šã—ã¾ã›ã‚“ã€‚
ä¿å­˜å…ˆã¯ dog_transformed.png ã«ã—ã¦ãã ã•ã„ã€‚
```
#### ğŸ“¸ å…¥åŠ›ç”»åƒ

![ä¾‹7ã®å…¥åŠ›ç”»åƒ](./docs/images/cute_cat_living_room.png)
#### ğŸ“¸ å‡ºåŠ›ä¾‹

![ä¾‹7ã®å‡ºåŠ›ç”»åƒ](./docs/images/dog_transformed.png)
(ï¿£â–½ï¿£;)
---


### ğŸŸ¦ â…¢. ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºç”Ÿæˆï¼ˆCustomizeï¼‰

#### ä¾‹8ï¼šæ§‹å›³åˆ¶å¾¡ï¼ˆControlï¼‰

```text
[reference_image_path ã‚’æŒ‡å®š=pose.png]
pose.png ã®ãƒãƒ¼ã‚ºã‚’å‚ç…§ã—ã€åŒã˜æ§‹å›³ã§äººç‰©ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
control_type: "scribble"
ä¿å­˜å…ˆã¯ park_woman_scribble.png ã«ã—ã¦ãã ã•ã„ã€‚
```
#### ğŸ“¸ å…¥åŠ›ç”»åƒ

![ä¾‹8ã®å…¥åŠ›ç”»åƒ](./docs/images/pose.png)
â†‘ChatGPTã§å‡ºåŠ›
```text
ãƒãƒ¬ã‚¨ã‚’è¸Šã£ã¦ã„ã‚‹å‹•ä½œã‚’è¡¨ã™æ£’äººé–“ã®å†™çœŸã‚’ç”Ÿæˆã—ã¦ã€€ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”3:4ã€€æ£’äººé–“ã¯ç™½ã€€èƒŒæ™¯ã¯é»’ã€€
æ£’ã®å¤ªã•ã¯å°‘ã—å¤ªã‚é–¢ç¯€ã¯ã‚ˆãã‚ã‹ã‚‹ã‚ˆã†ã«ã—ã¦
```
#### ğŸ“¸ å‡ºåŠ›ä¾‹

![ä¾‹8ã®å‡ºåŠ›ç”»åƒ](./docs/images/park_woman_scribble.png)
![ä¾‹8ã®å‡ºåŠ›ç”»åƒ2](./docs/images/park_woman_canny.png)
â†‘ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚¿ã‚¤ãƒ—ã‚’cannyã«ã—ãŸå ´åˆ

---
#### ä¾‹9ï¼šè¢«å†™ä½“ä¸€è²«æ€§ï¼ˆSubjectï¼‰

```text
åŒã˜çŒ«ã‚’åˆ¥ã®èƒŒæ™¯ã§ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
subject_images:
  - { image_path: "cat1.jpg" }
  - { image_path: "cat2.jpg" }
subject_description: "a brown tabby cat"
subject_type: "animal"
prompt: "An orange and white tabby cat [1] sitting on a traditional Japanese wooden engawa (veranda) in spring. Cherry blossoms visible in the background. Warm sunlight and peaceful atmosphere. Traditional Japanese house setting."
ä¿å­˜å…ˆã¯ engawa_cat.png ã«ã—ã¦ãã ã•ã„ã€‚
```
#### ğŸ“¸ å…¥åŠ›ç”»åƒ

![ä¾‹9ã®å…¥åŠ›ç”»åƒ](./docs/images/053d9476-b438-4bf1-8069-e40f4c4c650f.png)
![ä¾‹9ã®å…¥åŠ›ç”»åƒ](./docs/images/easy-banana-2025-10-11T09-53-01-377Z.png)

#### ğŸ“¸ å‡ºåŠ›ä¾‹

![ä¾‹9ã®å‡ºåŠ›ç”»åƒ](./docs/images/engawa_cat.png)

---
#### ä¾‹10ï¼šã‚¹ã‚¿ã‚¤ãƒ«è»¢é€ï¼ˆStyleï¼‰

```text
style_image_path: "starry_night.png"
style_description: "Van Gogh painting style with swirling brushstrokes"
prompt: "A modern city skyline at night with tall skyscrapers, illuminated windows, and city lights reflected in water, painted in the style of [1]. Swirling sky with stars above the buildings."
output_path: "van_gogh_city_detailed.png"
```
#### ğŸ“¸ å…¥åŠ›ç”»åƒ

![ä¾‹10ã®å…¥åŠ›ç”»åƒ](./docs/images/starry_night.png)
#### ğŸ“¸ å‡ºåŠ›ä¾‹

![van\_gogh\_city](./docs/images/van_gogh_city_3x4.png)

---

#### ä¾‹11ï¼šè¤‡åˆåˆ©ç”¨ï¼ˆè¢«å†™ä½“ï¼‹æ§‹å›³ï¼‹ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰

```json
{
  `prompt`: `A Renaissance oil painting portrait of a young Japanese woman [1] in an elegant dynamic pose with one arm raised gracefully [2]. She wears luxurious Renaissance-era clothing with rich fabrics, jewelry, and period-appropriate accessories. Painted in the classical Renaissance style [3] with chiaroscuro lighting, warm golden tones, detailed brushwork, and a dark background. The pose should match the reference gesture while maintaining the dignified Renaissance portrait aesthetic.`,
  `language`: `en`,
  `output_path`: `renaissance_pose_detailed.png`,
  `aspect_ratio`: `1:1`,
  `control_type`: `scribble`,
  `subject_type`: `person`,
  `subject_images`: [
    {
      `woman_park_1x1.png`
    }
  ],
  `style_image_path`: `renaissance_1x1.png`,
  `person_generation`: `ALLOW_ADULT`,
  `style_description`: `Renaissance oil painting style with chiaroscuro lighting and rich colors`,
  `control_image_path`: `pose1x1.png`,
  `subject_description`: `A young Japanese woman in her 20s with natural features and a friendly expression`,
  `enable_control_computation`: false
}
```
#### ğŸ“¸ å…¥åŠ›ç”»åƒ

![ä¾‹11ã®å…¥åŠ›ç”»åƒ](./docs/images/woman_park_1x1.png)
![ä¾‹11ã®å…¥åŠ›ç”»åƒ](./docs/images/pose1x1.png)
![ä¾‹11ã®å…¥åŠ›ç”»åƒ](./docs/images/renaissance_1x1.png)

#### ğŸ“¸ å‡ºåŠ›ä¾‹

![van\_gogh\_city](./docs/images/renaissance_pose_detailed.png)
( ï½¥_ï½¥;)

---
### ğŸŸ¦ â…£. é«˜è§£åƒåº¦ãƒ»çµ±åˆå‡¦ç†

#### ä¾‹12ï¼šç”Ÿæˆï¼‹ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°

```text
ãƒ‰ãƒ©ã‚´ãƒ³ã®ã‚¤ãƒ©ã‚¹ãƒˆã‚’æ¨ªé•· 16:9 ã§ç”Ÿæˆã—ã€4å€ã«æ‹¡å¤§ã—ã¦ä¿å­˜ã—ã¦ãã ã•ã„ã€‚
generate_and_upscale_image ã‚’ä½¿ã„ã€
å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«åã¯ dragon_4x.png ã«ã—ã¦ãã ã•ã„ã€‚
```

#### ğŸ“¸ å‡ºåŠ›ä¾‹

![dragon\_4x](./docs/images/dragon_4x.png)

---
#### ä¾‹13ï¼šæ—¢å­˜ç”»åƒã®ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°

```text
input_path: "portrait_adult.png"
scale_factor: 4
ä¿å­˜ãƒ•ã‚¡ã‚¤ãƒ«åã¯ portrait_upscaled.png ã«ã—ã¦ãã ã•ã„ã€‚
```

---
### ğŸŸ¦ â…¤. ç®¡ç†ãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

#### ä¾‹14ï¼šç”Ÿæˆç”»åƒä¸€è¦§

```text
ä¿å­˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ç”Ÿæˆç”»åƒã‚’ä¸€è¦§è¡¨ç¤ºã—ã¦ãã ã•ã„ã€‚
list_generated_images
```

---
#### ä¾‹15ï¼šã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ã‚¯ãƒ©ã‚¹æ¤œç´¢

```text
ã€Œå‹•ç‰©ã€ã‚«ãƒ†ã‚´ãƒªã®ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ã‚¯ãƒ©ã‚¹ã‚’è¡¨ç¤ºã—ã¦ãã ã•ã„ã€‚
list_semantic_classes
```

---
#### ä¾‹16ï¼šfile:// URI ç¢ºèª

```text
é’ç©ºã®é¢¨æ™¯ã‚’ç”Ÿæˆã—ã€å‡ºåŠ›ãƒ‘ã‚¹ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚
```

ğŸ“„ è¿”å´ä¾‹ï¼š
`file:///Users/username/Downloads/vertexai-imagen-files/sky.png`

---
#### ä¾‹17ï¼šã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆæœ‰åŠ¹åŒ–

```text
ã€Œæ¡œä¸¦æœ¨ã®é¢¨æ™¯ã€ã‚’ç”Ÿæˆã—ã¦ã€ã‚µãƒ ãƒã‚¤ãƒ«ã‚‚ä½œæˆã—ã¦ãã ã•ã„ã€‚
include_thumbnail: true
```

ğŸ’¡ `VERTEXAI_IMAGEN_THUMBNAIL=true` ã‚’è¨­å®šã™ã‚‹ã¨ã€ã™ã¹ã¦ã®ç”Ÿæˆã§è‡ªå‹•çš„ã«ã‚µãƒ ãƒã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

***æ³¨æ„***  Claude Desktopã§æœ‰åŠ¹ã«ã™ã‚‹ã¨ãƒãƒ£ãƒƒãƒˆãŒä¸­æ–­ã•ã‚Œã¾ã™

---


## ğŸ›  åˆ©ç”¨å¯èƒ½ãª MCP ãƒ„ãƒ¼ãƒ«

### 1. `generate_image`

ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰ç”»åƒã‚’ç”Ÿæˆã—ã¾ã™ã€‚

* `prompt`ï¼ˆå¿…é ˆï¼‰: ãƒ†ã‚­ã‚¹ãƒˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
* `output_path`: ä¿å­˜ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆçœç•¥å¯ï¼‰
* `aspect_ratio`: ç”»åƒæ¯”ç‡ï¼ˆä¾‹: 1:1, 16:9ï¼‰
* `return_base64`: **éæ¨å¥¨** Base64ã§è¿”å´ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: falseï¼‰
* `include_thumbnail`: ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆï¼ˆ128x128ã€ç´„30-50ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰ã€‚æœªæŒ‡å®šæ™‚ã¯ç’°å¢ƒå¤‰æ•° `VERTEXAI_IMAGEN_THUMBNAIL` ã®è¨­å®šã«å¾“ã†
* `safety_level`: å®‰å…¨æ€§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆBLOCK\_NONEã€œBLOCK\_LOW\_AND\_ABOVEï¼‰
* `person_generation`: äººç‰©ç”Ÿæˆãƒãƒªã‚·ãƒ¼ï¼ˆDONT\_ALLOW, ALLOW\_ADULT, ALLOW\_ALLï¼‰
* `language`: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå‡¦ç†è¨€èªï¼ˆauto, en, ja, ko ãªã©ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: autoï¼‰
* `model`: ä½¿ç”¨ã™ã‚‹Imagenãƒ¢ãƒ‡ãƒ«ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: imagen-3.0-generate-002ï¼‰

---

### 2. `edit_image` - é«˜åº¦ãªç”»åƒç·¨é›†

**Imagen 3.0å¯¾å¿œ**ã®é«˜åº¦ãªç”»åƒç·¨é›†æ©Ÿèƒ½ã€‚AIã«ã‚ˆã‚‹è‡ªå‹•ãƒã‚¹ã‚¯ç”Ÿæˆã€ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯åˆ†å‰²ã€å¤šæ§˜ãªç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã«å¯¾å¿œã—ã¾ã™ã€‚

#### åŸºæœ¬ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
* `prompt`ï¼ˆå¿…é ˆï¼‰: ç·¨é›†å†…å®¹ã®èª¬æ˜
* `reference_image_base64` / `reference_image_path`: å…ƒç”»åƒï¼ˆã©ã¡ã‚‰ã‹å¿…é ˆï¼‰
* `output_path`: ä¿å­˜ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆçœç•¥å¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `edited_image.png`ï¼‰
* `return_base64`: **éæ¨å¥¨** Base64ã§è¿”å´ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: falseï¼‰
* `include_thumbnail`: ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆï¼ˆ128x128ã€ç´„30-50ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰ã€‚æœªæŒ‡å®šæ™‚ã¯ç’°å¢ƒå¤‰æ•° `VERTEXAI_IMAGEN_THUMBNAIL` ã®è¨­å®šã«å¾“ã†

#### ãƒã‚¹ã‚¯æŒ‡å®šæ–¹æ³•ï¼ˆ5ã¤ã®é¸æŠè‚¢ï¼‰

##### ğŸ”¹ ãƒã‚¹ã‚¯ãªã—ç·¨é›†ï¼ˆMask-Freeï¼‰â­ **NEW!**
```text
mask_mode: "mask_free"  # ã¾ãŸã¯ mask_mode ã‚’æœªæŒ‡å®š
# ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã¿ã§ç·¨é›†é ˜åŸŸã¨å†…å®¹ã‚’AIãŒè‡ªå‹•åˆ¤æ–­
```
**ç‰¹å¾´:**
- ãƒã‚¹ã‚¯ã‚’ä¸€åˆ‡æŒ‡å®šã—ãªã„æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªç·¨é›†æ–¹æ³•
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã€ŒçŒ«ã‚’çŠ¬ã«å¤‰ãˆã‚‹ã€ã€ŒèƒŒæ™¯ã‚’æ£®ã«å¤‰ãˆã‚‹ã€ãªã©ã¨æŒ‡ç¤ºã™ã‚‹ã ã‘ã§ç·¨é›†å¯èƒ½
- AIãŒç”»åƒå…¨ä½“ã‚’è§£é‡ˆã—ã¦è‡ªå‹•çš„ã«é©åˆ‡ãªé ˜åŸŸã‚’ç·¨é›†
- æ‰‹è»½ã•ã¨æŸ”è»Ÿæ€§ã‚’ä¸¡ç«‹

##### ğŸ”¹ æ‰‹å‹•ãƒã‚¹ã‚¯ï¼ˆå¾“æ¥ã®æ–¹æ³•ï¼‰
```text
mask_mode: "user_provided"
mask_image_base64 / mask_image_path: ç™½=ç·¨é›†å¯¾è±¡ã€é»’=ä¿æŒé ˜åŸŸ
```

##### ğŸ”¹ èƒŒæ™¯è‡ªå‹•ãƒã‚¹ã‚¯
```text
mask_mode: "background"  # èƒŒæ™¯ã‚’è‡ªå‹•æ¤œå‡ºã—ã¦ãƒã‚¹ã‚¯ç”Ÿæˆ
```

##### ğŸ”¹ å‰æ™¯è‡ªå‹•ãƒã‚¹ã‚¯
```text
mask_mode: "foreground"  # å‰æ™¯ï¼ˆä¸»è¦è¢«å†™ä½“ï¼‰ã‚’è‡ªå‹•æ¤œå‡º
```

##### ğŸ”¹ ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒã‚¹ã‚¯
```text
mask_mode: "semantic"
mask_classes: [125]  # äººç‰©ã®ã‚¯ãƒ©ã‚¹IDï¼ˆå¿…é ˆï¼‰
```

#### ç·¨é›†ãƒ¢ãƒ¼ãƒ‰
* `edit_mode`: ç·¨é›†ã‚¿ã‚¤ãƒ—
  - `"inpaint_insertion"`: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¿½åŠ ãƒ»ä¿®æ­£ï¼ˆ**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**ï¼‰
  - `"inpaint_removal"`: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®é™¤å»
  - `"bgswap"`: èƒŒæ™¯ç½®æ›
  - `"outpainting"`: ã‚­ãƒ£ãƒ³ãƒã‚¹æ‹¡å¼µï¼ˆç”»åƒã‚’å…ƒã®ã‚µã‚¤ã‚ºã‚ˆã‚Šå¤§ããæ‹¡å¼µï¼‰

#### é«˜åº¦ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
* `mask_dilation`: ãƒã‚¹ã‚¯å¢ƒç•Œã®æ‹¡å¼µé‡ï¼ˆ0.01-0.1ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0.01ï¼‰
* `base_steps`: ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã‚¹ãƒ†ãƒƒãƒ—æ•°ï¼ˆ1-75ã€é™¤å»ã¯12-20ã€æŒ¿å…¥ã¯æœ€å¤§75æ¨å¥¨ï¼‰
* `guidance_scale`: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å¼·ã•ï¼ˆ0ã€œ30ï¼‰
* `negative_prompt`: å›é¿ã—ãŸã„è¦ç´ ã®æŒ‡ç¤º
* `mask_classes`: ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒã‚¹ã‚¯ç”¨ã‚¯ãƒ©ã‚¹IDé…åˆ—
* `model`: ä½¿ç”¨ã™ã‚‹ Imagen ç·¨é›†ãƒ¢ãƒ‡ãƒ«ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `imagen-3.0-capability-001`ï¼‰

#### ğŸ“‹ ç·¨é›†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è©³ç´°ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | å‹ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ | ä½¿ç”¨ä¾‹ |
|-----------|---|----------|------|-------|
| `mask_mode` | string | - (mask-free) | ãƒã‚¹ã‚¯ç”Ÿæˆæ–¹æ³• | `"mask_free"` (æœªæŒ‡å®š), `"background"`, `"foreground"`, `"semantic"`, `"user_provided"` |
| `edit_mode` | string | `inpaint_insertion` | ç·¨é›†æ“ä½œã‚¿ã‚¤ãƒ— | `"inpaint_removal"`, `"inpaint_insertion"`, `"bgswap"`, `"outpainting"` |
| `mask_classes` | number[] | - | ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ã‚¯ãƒ©ã‚¹ID | `[125]` (äººç‰©), `[7, 8]` (çŒ«ã¨çŠ¬), `[175, 176]` (è‡ªè»¢è»Šã¨è»Š) |
| `mask_dilation` | number | `0.01` | ãƒã‚¹ã‚¯å¢ƒç•Œæ‹¡å¼µç‡ | `0.02` (ç”»åƒå¹…ã®2%) |
| `base_steps` | number | - | ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã‚¹ãƒ†ãƒƒãƒ—æ•° | `15` (é™¤å»), `25` (æŒ¿å…¥) |
| `guidance_scale` | number | - | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå¼·åº¦ | `10-20` (æ¨™æº–), `5-9` (å¼±), `21+` (å¼·) |
| `negative_prompt` | string | - | å›é¿è¦ç´  | `"blurry, low quality, distorted"` |

#### ğŸ¯ æ¨å¥¨è¨­å®šçµ„ã¿åˆã‚ã›

| ç”¨é€” | mask_mode | edit_mode | base_steps | mask_dilation |
|------|----------|-----------|------------|---------------|
| **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ™ãƒ¼ã‚¹ç°¡æ˜“ç·¨é›†** â­ | **æœªæŒ‡å®š or `mask_free`** | **ä»»æ„** | **15-25** | **-** |
| èƒŒæ™¯å¤‰æ›´ | `background` | `bgswap` | 20-25 | 0.01-0.02 |
| ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆé™¤å» | `foreground` | `inpaint_removal` | 12-18 | 0.01 |
| äººç‰©æœè£…å¤‰æ›´ | `semantic` | `inpaint_insertion` | 25-30 | 0.02 |
| ç²¾å¯†æ‰‹å‹•ç·¨é›† | `user_provided` | `inpaint_insertion` | 20-35 | 0.005-0.01 |

---

### 3. `customize_image` - å‚ç…§ç”»åƒã‚’ä½¿ã£ãŸé«˜åº¦ãªç”»åƒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º â­ **NEW!**

**Imagen 3.0å¯¾å¿œ**ã®å‚ç…§ç”»åƒã‚’ä½¿ã£ãŸç”»åƒç”Ÿæˆæ©Ÿèƒ½ã€‚æ§‹é€ åˆ¶å¾¡ã€è¢«å†™ä½“ä¸€è²«æ€§ã€ã‚¹ã‚¿ã‚¤ãƒ«è»¢é€ã«å¯¾å¿œã—ã¾ã™ã€‚

#### åŸºæœ¬ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
* `prompt`ï¼ˆå¿…é ˆï¼‰: ç”»åƒç”Ÿæˆã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆ[1], [2]ãªã©ã§å‚ç…§ç”»åƒIDã‚’æŒ‡å®šå¯èƒ½ï¼‰
* `output_path`: ä¿å­˜ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆçœç•¥å¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `customized_image.png`ï¼‰
* `aspect_ratio`: ç”»åƒæ¯”ç‡ï¼ˆä¾‹: 1:1, 16:9ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1:1ï¼‰
* `return_base64`: **éæ¨å¥¨** Base64ã§è¿”å´ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: falseï¼‰
* `include_thumbnail`: ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆï¼ˆ128x128ã€ç´„30-50ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰

#### å‚ç…§ç”»åƒã‚¿ã‚¤ãƒ—ï¼ˆå°‘ãªãã¨ã‚‚1ã¤å¿…é ˆï¼‰

##### ğŸ® æ§‹é€ åˆ¶å¾¡ï¼ˆControlï¼‰
ç”»åƒã®æ§‹é€ ãƒ»ãƒãƒ¼ã‚ºãƒ»æ§‹å›³ã‚’åˆ¶å¾¡ã—ã¾ã™ã€‚

```text
control_image_path: "pose.png"  # ã¾ãŸã¯ control_image_base64
control_type: "face_mesh" | "canny" | "scribble"
enable_control_computation: true  # true=è‡ªå‹•è¨ˆç®—ï¼ˆæ¨å¥¨ã€é€šå¸¸ã®ç”»åƒï¼‰ã€false=å‡¦ç†æ¸ˆã¿ç”»åƒä½¿ç”¨ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: trueï¼‰
```

**control_type ã®ç¨®é¡:**
- `"face_mesh"`: é¡”ãƒ¡ãƒƒã‚·ãƒ¥ï¼ˆäººç‰©ã®ãƒãƒ¼ã‚ºåˆ¶å¾¡ï¼‰
- `"canny"`: Cannyã‚¨ãƒƒã‚¸æ¤œå‡ºï¼ˆè¼ªéƒ­ãƒ»æ§‹é€ åˆ¶å¾¡ï¼‰
- `"scribble"`: ãƒ•ãƒªãƒ¼ãƒãƒ³ãƒ‰æç”»ï¼ˆãƒ©ãƒ•ãªæ§‹å›³æŒ‡å®šï¼‰

**ä½¿ç”¨ä¾‹:**
```text
ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ: "A portrait of a person [1] in a professional pose"
control_image_path: "pose_reference.jpg"
control_type: "face_mesh"
â†’ å‚ç…§ç”»åƒ[1]ã®ãƒãƒ¼ã‚ºã‚’ä¿ã¡ãªãŒã‚‰æ–°ã—ã„äººç‰©ã‚’ç”Ÿæˆ
```

##### ğŸ‘¤ è¢«å†™ä½“ä¸€è²«æ€§ï¼ˆSubjectï¼‰
åŒã˜è¢«å†™ä½“ã‚’ä¸€è²«ã—ã¦ç”Ÿæˆã—ã¾ã™ã€‚è¤‡æ•°ã®å‚ç…§ç”»åƒã§ç²¾åº¦å‘ä¸Šã€‚

```text
subject_images: [
  { image_path: "person1.jpg" },
  { image_path: "person2.jpg" }  # è¤‡æ•°æŒ‡å®šã§å“è³ªå‘ä¸Š
]
subject_description: "a man with short hair"  # å¿…é ˆï¼ˆè¢«å†™ä½“ã®èª¬æ˜ï¼‰
subject_type: "person" | "animal" | "product" | "default"  # å¿…é ˆ
```

**subject_type ã®ç¨®é¡:**
- `"person"`: äººç‰©
- `"animal"`: å‹•ç‰©
- `"product"`: å•†å“
- `"default"`: ãã®ä»–ã®è¢«å†™ä½“

**ä½¿ç”¨ä¾‹:**
```text
ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ: "A photo of [1] at the beach"
subject_images: [
  { image_path: "cat_photo1.jpg" },
  { image_path: "cat_photo2.jpg" }
]
subject_description: "a brown tabby cat"
subject_type: "animal"
â†’ åŒã˜çŒ«ã‚’ãƒ“ãƒ¼ãƒã§æ’®å½±ã—ãŸã‚ˆã†ãªç”»åƒã‚’ç”Ÿæˆ
```

##### ğŸ¨ ã‚¹ã‚¿ã‚¤ãƒ«è»¢é€ï¼ˆStyleï¼‰
å‚ç…§ç”»åƒã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é©ç”¨ã—ã¾ã™ã€‚

```text
style_image_path: "art_style.jpg"  # ã¾ãŸã¯ style_image_base64
style_description: "Van Gogh painting style"  # çœç•¥å¯ï¼ˆæ¨å¥¨ï¼šè¨˜è¿°ã™ã‚‹ã“ã¨ã§ç²¾åº¦å‘ä¸Šï¼‰
```

**ä½¿ç”¨ä¾‹:**
```text
ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ: "A landscape in the style of [1]"
style_image_path: "starry_night.jpg"
style_description: "Van Gogh's impressionist style"
â†’ ã‚´ãƒƒãƒ›é¢¨ã®é¢¨æ™¯ç”»ã‚’ç”Ÿæˆ
```

#### è¤‡åˆåˆ©ç”¨

è¤‡æ•°ã®å‚ç…§ã‚¿ã‚¤ãƒ—ã‚’åŒæ™‚ã«ä½¿ç”¨ã§ãã¾ã™ï¼š

```text
ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ: "A portrait of [1] in the pose of [2] with the style of [3]"
subject_images: [{ image_path: "person.jpg" }]
subject_description: "a woman with long hair"
subject_type: "person"
control_image_path: "pose.jpg"
control_type: "face_mesh"
style_image_path: "painting.jpg"
style_description: "Renaissance painting style"
â†’ ç‰¹å®šã®äººç‰©ã‚’ã€æŒ‡å®šã•ã‚ŒãŸãƒãƒ¼ã‚ºã§ã€ãƒ«ãƒã‚µãƒ³ã‚¹é¢¨ã«æç”»
```

#### ãã®ä»–ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
* `safety_level`: å®‰å…¨æ€§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆBLOCK\_NONEã€œBLOCK\_LOW\_AND\_ABOVEï¼‰
* `person_generation`: äººç‰©ç”Ÿæˆãƒãƒªã‚·ãƒ¼ï¼ˆDONT\_ALLOW, ALLOW\_ADULT, ALLOW\_ALLï¼‰
* `language`: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå‡¦ç†è¨€èªï¼ˆauto, en, ja, ko ãªã©ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: autoï¼‰
* `negative_prompt`: å›é¿ã—ãŸã„è¦ç´ ã®æŒ‡ç¤º
* `model`: ä½¿ç”¨ã™ã‚‹Imagenãƒ¢ãƒ‡ãƒ«ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: imagen-3.0-generate-002ï¼‰

#### ğŸ“‹ å‚ç…§ç”»åƒID ã«ã¤ã„ã¦

ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå†…ã§ `[1]`, `[2]`, `[3]` ãªã©ã‚’ä½¿ç”¨ã—ã¦ã€å„å‚ç…§ç”»åƒã‚’å‚ç…§ã§ãã¾ã™ï¼š

- Controlç”»åƒãŒæœ€åˆã«æä¾›ã•ã‚ŒãŸå ´åˆ â†’ `[1]`
- Subjectç”»åƒãŒæœ€åˆã«æä¾›ã•ã‚ŒãŸå ´åˆ â†’ `[1]`ï¼ˆè¤‡æ•°ã®è¢«å†™ä½“ç”»åƒã¯åŒã˜IDã‚’å…±æœ‰ï¼‰
- Styleç”»åƒãŒæœ€åˆã«æä¾›ã•ã‚ŒãŸå ´åˆ â†’ `[1]`

è¤‡æ•°ã‚¿ã‚¤ãƒ—ã‚’çµ„ã¿åˆã‚ã›ã‚‹å ´åˆã€è¿½åŠ é †ã«ç•ªå·ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¾ã™ã€‚

---

### 4. `customize_image_from_yaml` - YAMLè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ç”»åƒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º â­ **NEW!**

è¤‡é›‘ãª `customize_image` ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’YAMLè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†ã§ãã¾ã™ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å†åˆ©ç”¨ã—ãŸã‚Šã€è¤‡æ•°ã®å‚ç…§ç”»åƒã‚’æ•´ç†ã—ã¦æŒ‡å®šã§ãã¾ã™ã€‚

#### åŸºæœ¬ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
* `yaml_path`ï¼ˆå¿…é ˆï¼‰: YAMLè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ï¼ˆçµ¶å¯¾ãƒ‘ã‚¹ã¾ãŸã¯ç›¸å¯¾ãƒ‘ã‚¹ï¼‰

#### YAMLè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹é€ 

YAMLè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€`customize_image` ãƒ„ãƒ¼ãƒ«ã®ã™ã¹ã¦ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨˜è¿°ã§ãã¾ã™ï¼š

```yaml
# åŸºæœ¬è¨­å®šï¼ˆå¿…é ˆï¼‰
model: "imagen-3.0-capability-001"
output_path: "./output/my_image.png"
prompt: "A portrait of [1] in the style of [2]"

# å‚ç…§ç”»åƒè¨­å®š
subjects:
  - reference_id: 1
    images:
      - "./images/person1.jpg"
      - "./images/person2.jpg"
    config:
      type: "person"
      description: "a young woman with long hair"  # å¿…é ˆ

style:
  reference_id: 2
  image_path: "./images/art_style.jpg"
  description: "impressionist painting style"  # çœç•¥å¯èƒ½

# ãã®ä»–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
aspect_ratio: "3:4"
sample_count: 2
safety_level: "BLOCK_MEDIUM_AND_ABOVE"
```

#### ä½¿ç”¨ä¾‹

```text
templates/customize/04_with-style.yaml ã®è¨­å®šã§ç”»åƒã‚’ç”Ÿæˆã—ã¦ãã ã•ã„
```

#### ã‚µãƒ³ãƒ—ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã¯ä»¥ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒå«ã¾ã‚Œã¦ã„ã¾ã™ï¼š

* `templates/customize/01_subject-only.yaml` - è¢«å†™ä½“ã®ã¿ï¼ˆæœ€å°æ§‹æˆï¼‰
* `templates/customize/02_multi-subject.yaml` - è¤‡æ•°è¢«å†™ä½“
* `templates/customize/03_with-control.yaml` - åˆ¶å¾¡ç”»åƒï¼ˆæ§‹é€ åˆ¶å¾¡ï¼‰
* `templates/customize/04_with-style.yaml` - ã‚¹ã‚¿ã‚¤ãƒ«ç”»åƒï¼ˆã‚¹ã‚¿ã‚¤ãƒ«è»¢é€ï¼‰
* `templates/customize/05_full-featured.yaml` - å…¨æ©Ÿèƒ½çµ±åˆï¼ˆè¢«å†™ä½“+åˆ¶å¾¡+ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰

è©³ç´°ãªèª¬æ˜ã¨YAMLå½¢å¼ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã¯ [templates/customize/README.md](./templates/customize/README.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

#### ãƒ¡ãƒªãƒƒãƒˆ

* âœ… **å†åˆ©ç”¨æ€§**: åŒã˜è¨­å®šã‚’ä½•åº¦ã‚‚ä½¿ç”¨å¯èƒ½
* âœ… **å¯èª­æ€§**: è¤‡é›‘ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã‚ã‹ã‚Šã‚„ã™ãæ•´ç†
* âœ… **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†**: YAMLè¨­å®šã‚’Gitã§ç®¡ç†
* âœ… **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåŒ–**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç”¨æ„
* âœ… **ã‚³ãƒ¡ãƒ³ãƒˆ**: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®èª¬æ˜ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã¨ã—ã¦è¨˜è¿°å¯èƒ½

#### YAMLè¨­å®šã®è©³ç´°

YAMLå½¢å¼ã§æŒ‡å®šã§ãã‚‹ã™ã¹ã¦ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨æ¤œè¨¼ãƒ«ãƒ¼ãƒ«ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š

ğŸ“– **[YAMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½¿ç”¨ã‚¬ã‚¤ãƒ‰](./templates/customize/README.md)**

* YAMLæ§‹é€ ã®è©³ç´°èª¬æ˜
* reference_id ã®ãƒ«ãƒ¼ãƒ«
* ãƒ‘ã‚¹æŒ‡å®šæ–¹æ³•
* ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

---

### 4-2. `customize_image_from_yaml_inline` - ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³YAMLã‹ã‚‰ç”»åƒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º â­ **NEW!**

YAMLãƒ•ã‚¡ã‚¤ãƒ«ã®ä»£ã‚ã‚Šã«ã€YAMLå†…å®¹ã‚’æ–‡å­—åˆ—ã¨ã—ã¦ç›´æ¥ãƒãƒ£ãƒƒãƒˆã«è²¼ã‚Šä»˜ã‘ã¦ç”»åƒã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ã€‚`customize_image_from_yaml` ã¨åŒã˜æ©Ÿèƒ½ã§ã™ãŒã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹æŒ‡å®šãŒä¸è¦ã§ã€ã‚ˆã‚Šæ‰‹è»½ã«ä½¿ç”¨ã§ãã¾ã™ã€‚

#### åŸºæœ¬ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
* `yaml_content`ï¼ˆå¿…é ˆï¼‰: YAMLè¨­å®šå†…å®¹ï¼ˆæ–‡å­—åˆ—ï¼‰

#### YAMLå†…å®¹ã®æ§‹é€ 

YAMLå†…å®¹ã¯ `customize_image_from_yaml` ã¨åŒã˜æ§‹é€ ã§ã™ã€‚ä»¥ä¸‹ã®ã™ã¹ã¦ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨˜è¿°ã§ãã¾ã™ï¼š

```yaml
# åŸºæœ¬è¨­å®šï¼ˆå¿…é ˆï¼‰
model: "imagen-3.0-capability-001"
output_path: "./output/my_image.png"
prompt: "A portrait of [1] in the style of [2]"

# å‚ç…§ç”»åƒè¨­å®š
subjects:
  - reference_id: 1
    images:
      - "./images/person1.jpg"
      - "./images/person2.jpg"
    config:
      type: "person"
      description: "a young woman with long hair"  # å¿…é ˆ

style:
  reference_id: 2
  image_path: "./images/art_style.jpg"
  description: "impressionist painting style"  # çœç•¥å¯èƒ½

# ãã®ä»–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
aspect_ratio: "3:4"
sample_count: 2
safety_level: "BLOCK_MEDIUM_AND_ABOVE"
```

#### ä½¿ç”¨ä¾‹

```text
ä»¥ä¸‹ã®YAMLè¨­å®šã§ç”»åƒã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ï¼š

model: "imagen-3.0-capability-001"
output_path: "portrait_style.png"
prompt: "A portrait of [1] in the style of [2]"

subjects:
  - reference_id: 1
    images:
      - "woman_photo.jpg"
    config:
      type: "person"
      description: "a young woman with long hair"

style:
  reference_id: 2
  image_path: "art_style.jpg"
  description: "impressionist painting style"

aspect_ratio: "3:4"
```

#### ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã¨ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³YAMLã®ä½¿ã„åˆ†ã‘

| æ–¹æ³• | ç”¨é€” | ãƒ¡ãƒªãƒƒãƒˆ |
|------|------|---------|
| **customize_image_from_yaml** | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹æŒ‡å®š | âœ… ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ãŒå®¹æ˜“<br>âœ… ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†å¯èƒ½<br>âœ… è¤‡é›‘ãªè¨­å®šã«æœ€é© |
| **customize_image_from_yaml_inline** | ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³YAML | âœ… ãƒ•ã‚¡ã‚¤ãƒ«ä¸è¦ã§æ‰‹è»½<br>âœ… ãƒãƒ£ãƒƒãƒˆã§ç›´æ¥ç·¨é›†å¯èƒ½<br>âœ… ä¸€æ™‚çš„ãªè¨­å®šã«æœ€é© |

#### ãƒ¡ãƒªãƒƒãƒˆ

* âœ… **ãƒ•ã‚¡ã‚¤ãƒ«ä¸è¦**: YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã›ãšã«ç›´æ¥å®Ÿè¡Œ
* âœ… **ãƒãƒ£ãƒƒãƒˆå†…ã§ç·¨é›†**: è¨­å®šã‚’ãã®å ´ã§èª¿æ•´å¯èƒ½
* âœ… **å…±æœ‰ãŒç°¡å˜**: YAMLå†…å®¹ã‚’ã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆã§å…±æœ‰
* âœ… **ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**: è¨­å®šã‚’è©¦ã™éš›ã«ä¾¿åˆ©

#### æ³¨æ„äº‹é …

* YAMLæ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹å ´åˆã€é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™
* ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã¯ `customize_image_from_yaml` ã¨åŒã˜ãƒ«ãƒ¼ãƒ«ã§è§£æ±ºã•ã‚Œã¾ã™
* åŒã˜YAMLè¨­å®šã‚’ç¹°ã‚Šè¿”ã—ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€`customize_image_from_yaml` ã§ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨

---

### 5. `upscale_image`

ç”»åƒã‚’ 2 å€ / 4 å€ã«ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒ«ã—ã¾ã™ã€‚

* `input_path`ï¼ˆå¿…é ˆï¼‰: å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
* `output_path`: ä¿å­˜ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆçœç•¥å¯ï¼‰
* `scale_factor`: å€ç‡ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 2ï¼‰
* `return_base64`: **éæ¨å¥¨** Base64ã§è¿”å´ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: falseï¼‰
* `include_thumbnail`: ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆï¼ˆ128x128ã€ç´„30-50ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰ã€‚æœªæŒ‡å®šæ™‚ã¯ç’°å¢ƒå¤‰æ•° `VERTEXAI_IMAGEN_THUMBNAIL` ã®è¨­å®šã«å¾“ã†

---

### 5. `generate_and_upscale_image`

ç”»åƒç”Ÿæˆã¨ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‚’ä¸€æ‹¬ã§è¡Œã„ã¾ã™ã€‚
`generate_image` ã¨ `upscale_image` ã®çµ±åˆå‡¦ç†ã§ã™ã€‚

* `prompt`ï¼ˆå¿…é ˆï¼‰: ãƒ†ã‚­ã‚¹ãƒˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
* `output_path`: ä¿å­˜ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆçœç•¥å¯ï¼‰
* `aspect_ratio`: ç”»åƒæ¯”ç‡ï¼ˆä¾‹: 1:1, 16:9ï¼‰
* `scale_factor`: å€ç‡ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 2ï¼‰
* `return_base64`: **éæ¨å¥¨** Base64ã§è¿”å´ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: falseï¼‰
* `include_thumbnail`: ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆï¼ˆ128x128ã€ç´„30-50ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰ã€‚æœªæŒ‡å®šæ™‚ã¯ç’°å¢ƒå¤‰æ•° `VERTEXAI_IMAGEN_THUMBNAIL` ã®è¨­å®šã«å¾“ã†
* `safety_level`: å®‰å…¨æ€§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆBLOCK\_NONEã€œBLOCK\_LOW\_AND\_ABOVEï¼‰
* `person_generation`: äººç‰©ç”Ÿæˆãƒãƒªã‚·ãƒ¼ï¼ˆDONT\_ALLOW, ALLOW\_ADULT, ALLOW\_ALLï¼‰
* `language`: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå‡¦ç†è¨€èªï¼ˆauto, en, ja, ko ãªã©ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: autoï¼‰
* `model`: ä½¿ç”¨ã™ã‚‹Imagenãƒ¢ãƒ‡ãƒ«ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: imagen-3.0-generate-002ï¼‰

---

### 6. `list_generated_images`

ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€è¦§è¡¨ç¤ºã—ã¾ã™ã€‚

* `directory`: æ¤œç´¢å¯¾è±¡ãƒ•ã‚©ãƒ«ãƒ€ï¼ˆçœç•¥æ™‚ã¯ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰

---

### 7. `list_semantic_classes` - ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ã‚¯ãƒ©ã‚¹IDæ¤œç´¢ â­ **NEW!**

**Imagen 3.0å¯¾å¿œ**ã®ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯åˆ†å‰²ç”¨ã‚¯ãƒ©ã‚¹IDï¼ˆ0-193ã®å…¨194ã‚¯ãƒ©ã‚¹ï¼‰ã‚’æ¤œç´¢ãƒ»ä¸€è¦§è¡¨ç¤ºã—ã¾ã™ã€‚
`edit_image` ã® `mask_mode: "semantic"` ã§ä½¿ç”¨ã™ã‚‹ `mask_classes` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«æŒ‡å®šã™ã‚‹ã‚¯ãƒ©ã‚¹IDã‚’ç°¡å˜ã«è¦‹ã¤ã‘ã‚‰ã‚Œã¾ã™ã€‚

#### ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆã™ã¹ã¦çœç•¥å¯ï¼‰

* `category`: ã‚«ãƒ†ã‚´ãƒªã§çµã‚Šè¾¼ã¿ï¼ˆä¾‹: `"äººç‰©"`, `"å‹•ç‰©"`, `"ä¹—ã‚Šç‰©"`, `"å®¶å…·"`, `"é›»åŒ–è£½å“"`, `"é£Ÿå“"`, `"å»ºç‰©ãƒ»æ§‹é€ "`, `"è‡ªç„¶"`, `"å±‹å¤–è¨­å‚™"`, `"ã‚¹ãƒãƒ¼ãƒ„ç”¨å“"`, `"ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼"`, `"ãã®ä»–"`ï¼‰
* `search`: æ—¥æœ¬èªã¾ãŸã¯è‹±èªã§ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ï¼ˆä¾‹: `"è»Š"`, `"car"`, `"äºº"`, `"person"`ï¼‰
* `ids`: ç‰¹å®šã®ã‚¯ãƒ©ã‚¹IDã®è©³ç´°æƒ…å ±ã‚’å–å¾—ï¼ˆä¾‹: `[125, 175, 176]`ï¼‰

#### ä½¿ç”¨ä¾‹

##### å…¨ã‚¯ãƒ©ã‚¹ä¸€è¦§è¡¨ç¤º
```text
ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ã‚¯ãƒ©ã‚¹ã®ä¸€è¦§ã‚’æ•™ãˆã¦ãã ã•ã„
```

##### ã‚«ãƒ†ã‚´ãƒªã§çµã‚Šè¾¼ã¿
```text
ã€Œå‹•ç‰©ã€ã‚«ãƒ†ã‚´ãƒªã®ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ã‚¯ãƒ©ã‚¹ã‚’æ•™ãˆã¦ãã ã•ã„
```

##### ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢
```text
ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ã‚¯ãƒ©ã‚¹ã§ã€Œè»Šã€ã«é–¢é€£ã™ã‚‹ã‚‚ã®ã‚’æ¤œç´¢ã—ã¦ãã ã•ã„
```

##### ç‰¹å®šIDã®è©³ç´°ç¢ºèª
```text
ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ã‚¯ãƒ©ã‚¹ID 125, 175, 176 ã®è©³ç´°ã‚’æ•™ãˆã¦ãã ã•ã„
```

#### å‡ºåŠ›å½¢å¼

**å…¨ä¸€è¦§è¡¨ç¤ºã®å ´åˆ:**
- ã‚ˆãä½¿ã‚ã‚Œã‚‹ã‚¯ãƒ©ã‚¹IDã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤º
- å…¨ã‚¯ãƒ©ã‚¹ã‚’ã‚«ãƒ†ã‚´ãƒªåˆ¥ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦è¡¨ç¤º
- å„ã‚¯ãƒ©ã‚¹ã®IDã€æ—¥æœ¬èªåã€è‹±èªåã‚’è¡¨ç¤º

**æ¤œç´¢çµæœã®å ´åˆ:**
- ãƒãƒƒãƒã—ãŸã‚¯ãƒ©ã‚¹ã®ã¿ã‚’è¡¨ç¤º
- IDã€æ—¥æœ¬èªåã€è‹±èªåã‚’å«ã‚€è©³ç´°æƒ…å ±

**ç‰¹å®šIDæ¤œç´¢ã®å ´åˆ:**
- æŒ‡å®šã•ã‚ŒãŸIDã®ã‚¯ãƒ©ã‚¹æƒ…å ±ã‚’è©³ç´°è¡¨ç¤º
- ã‚«ãƒ†ã‚´ãƒªæƒ…å ±ã‚‚å«ã‚€
- edit_imageã§ã®ä½¿ç”¨æ–¹æ³•ã®ãƒ’ãƒ³ãƒˆã‚’è¡¨ç¤º

#### ğŸ’¡ ä½¿ã„æ–¹ã®ãƒ’ãƒ³ãƒˆ

ã“ã®ãƒ„ãƒ¼ãƒ«ã§è¦‹ã¤ã‘ãŸã‚¯ãƒ©ã‚¹IDã¯ã€`edit_image` ãƒ„ãƒ¼ãƒ«ã® `mask_classes` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«æŒ‡å®šã—ã¦ä½¿ç”¨ã—ã¾ã™ï¼š

```text
# ä¾‹: äººç‰©ï¼ˆID: 125ï¼‰ã‚’ç·¨é›†å¯¾è±¡ã«ã™ã‚‹
mask_mode: "semantic"
mask_classes: [125]

# ä¾‹: è¤‡æ•°ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¯¾è±¡ã«ã™ã‚‹ï¼ˆè‡ªè»¢è»Šã¨è»Šï¼‰
mask_mode: "semantic"
mask_classes: [175, 176]
```

---

### åˆ©ç”¨å¯èƒ½ãªImagenãƒ¢ãƒ‡ãƒ«

| ãƒ¢ãƒ‡ãƒ«å | ç‰¹å¾´ | ç”¨é€” |
|----------|------|------|
| `imagen-3.0-generate-002` | Imagen 3ï¼ˆæ¨™æº–ï¼‰| ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸå“è³ªã¨é€Ÿåº¦ï¼ˆ**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**ï¼‰ |
| `imagen-3.0-fast-generate-001` | Imagen 3 Fast | é«˜é€Ÿç”Ÿæˆã€å“è³ªã¯æ¨™æº–ã‚ˆã‚ŠåŠ£ã‚‹ |
| `imagen-4.0-generate-preview-06-06` | Imagen 4 | ã‚ˆã‚Šé«˜å“è³ªãªç”»åƒç”Ÿæˆ |
| `imagen-4.0-fast-generate-preview-06-06` | Imagen 4 Fast | é«˜é€Ÿã‹ã¤é«˜å“è³ªãªç”»åƒç”Ÿæˆ |
| `imagen-4.0-ultra-generate-preview-06-06` | Imagen 4 Ultra | æœ€é«˜å“è³ªï¼ˆå‡¦ç†æ™‚é–“ãŒé•·ã„ï¼‰ |

**ä½¿ç”¨ä¾‹:**
```text
ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ: "ç¾ã—ã„å±±ã®é¢¨æ™¯"
ãƒ¢ãƒ‡ãƒ«: imagen-4.0-ultra-generate-preview-06-06
```

---

### ç·¨é›†ãƒ»ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒ«ç”¨ãƒ¢ãƒ‡ãƒ«

| ãƒ¢ãƒ‡ãƒ«å | ç”¨é€” | æ–°æ©Ÿèƒ½å¯¾å¿œ |
|----------|------|-----------|
| `imagen-3.0-capability-001` | **Imagen 3 ç³»ã®ç·¨é›†ãƒ»ãƒã‚¹ã‚¯ãƒ»ã‚¤ãƒ³ãƒšã‚¤ãƒ³ãƒˆå¯¾å¿œï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰** | âœ… è‡ªå‹•ãƒã‚¹ã‚¯ç”Ÿæˆã€ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯åˆ†å‰²ã€é«˜åº¦ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ |
| `imagegeneration@006` | Imagen 2.5 ç³»æœ€çµ‚ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆäº’æ›ç›®çš„ï¼‰ | âš ï¸ åŸºæœ¬ç·¨é›†ã®ã¿ï¼ˆæ–°æ©Ÿèƒ½ã¯éå¯¾å¿œï¼‰ |
| `imagegeneration@005` | Imagen 2.5 ç³»æ—§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆäº’æ›ç›®çš„ï¼‰ | âŒ éæ¨å¥¨ |
| `imagegeneration@002` | Imagen 2 ç³»æ—§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆäº’æ›ç›®çš„ï¼‰ | âŒ éæ¨å¥¨ |

### ğŸ·ï¸ ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒã‚¹ã‚¯å¯¾å¿œã‚¯ãƒ©ã‚¹IDï¼ˆå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæº–æ‹ ï¼‰

ç”»åƒç·¨é›†ã§`mask_mode: "semantic"`ã‚’ä½¿ç”¨ã™ã‚‹éš›ã®ä»£è¡¨çš„ãªã‚¯ãƒ©ã‚¹IDã§ã™ï¼š

| ã‚«ãƒ†ã‚´ãƒª | ã‚¯ãƒ©ã‚¹ID | èª¬æ˜ | ä½¿ç”¨ä¾‹ |
|----------|----------|------|-------|
| **äººç‰©** | `125` | personï¼ˆäººç‰©ï¼‰ | æœè£…å¤‰æ›´ã€äººç‰©é™¤å» |
| **å‹•ç‰©** | `6`, `7`, `8`, `9` | bird, cat, dog, horse | ãƒšãƒƒãƒˆé–¢é€£ç·¨é›† |
| **ä¹—ã‚Šç‰©** | `175`, `176`, `179`, `180`, `182` | bicycle, car, motorcycle, bus, truck | è»Šä¸¡é™¤å»ãƒ»å¤‰æ›´ |
| **å»ºç‰©** | `35` | building | å»ºç¯‰ç‰©ç·¨é›† |

**âš ï¸ é‡è¦**: è¤‡æ•°ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¯¾è±¡ã«ã™ã‚‹å ´åˆã¯é…åˆ—ã§æŒ‡å®šï¼ˆä¾‹: `[7, 8]` ã§çŒ«ã¨çŠ¬ï¼‰

> ğŸ’¡ **ãƒ’ãƒ³ãƒˆ**: å®Œå…¨ãªã‚¯ãƒ©ã‚¹IDä¸€è¦§ï¼ˆå…¨194ã‚¯ãƒ©ã‚¹ã€ID: 0-193ï¼‰ã¯ `list_semantic_classes` ãƒ„ãƒ¼ãƒ«ã§æ¤œç´¢ãƒ»ç¢ºèªã§ãã¾ã™ã€‚ã‚«ãƒ†ã‚´ãƒªåˆ¥è¡¨ç¤ºã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ã€ç‰¹å®šIDæ¤œç´¢ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚è©³ç´°ã¯[Vertex AI Imagen APIå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/imagen-api-edit)ã‚‚å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è¨€èªã«ã¤ã„ã¦

çœç•¥å¯ã€‚ãƒ†ã‚­ã‚¹ãƒˆ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨€èªã«å¯¾å¿œã™ã‚‹è¨€èªã‚³ãƒ¼ãƒ‰ã€‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹å€¤ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚

- auto: è‡ªå‹•æ¤œå‡ºã€‚Imagen ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹è¨€èªã‚’æ¤œå‡ºã™ã‚‹ã¨ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å¦å®šçš„ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè‹±èªã«ç¿»è¨³ã•ã‚Œã¾ã™ã€‚æ¤œå‡ºã•ã‚ŒãŸè¨€èªãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„å ´åˆã€Imagen ã¯å…¥åŠ›ãƒ†ã‚­ã‚¹ãƒˆã‚’ãã®ã¾ã¾ä½¿ç”¨ã™ã‚‹ãŸã‚ã€äºˆæœŸã—ãªã„å‡ºåŠ›ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã¯è¿”ã•ã‚Œã¾ã›ã‚“ã€‚
- en: è‹±èª
- ja: æ—¥æœ¬èª
- ko: éŸ“å›½èª
- zh: ä¸­å›½èªï¼ˆç°¡ä½“ï¼‰
- zh-tw: ä¸­å›½èªï¼ˆç¹ä½“ï¼‰
- hi: ãƒ’ãƒ³ãƒ‡ã‚£ãƒ¼èª
- pt: ãƒãƒ«ãƒˆã‚¬ãƒ«èª
- es: ã‚¹ãƒšã‚¤ãƒ³èª

---

## ğŸ§ª é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆ

```bash
npm run dev         # é–‹ç™ºãƒ¢ãƒ¼ãƒ‰
DEBUG=1 npm run dev # ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ï¼ˆè©³ç´°ãƒ­ã‚°ã‚ã‚Šï¼‰
```

---

## ğŸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

| ç—‡çŠ¶            | è§£æ±ºç­–                                           |
| ------------- | --------------------------------------------- |
| ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ãªã„    | ãƒ‘ã‚¹ã‚„ Node.js ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ¨©é™ã‚’ç¢ºèª              |
| èªè¨¼ã‚¨ãƒ©ãƒ¼         | `GOOGLE_APPLICATION_CREDENTIALS` ã®ãƒ‘ã‚¹ã¨ãƒ­ãƒ¼ãƒ«è¨­å®šã‚’ç¢ºèª |
| ç”»åƒç”Ÿæˆå¤±æ•—        | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚ˆã‚Šå…·ä½“çš„ã«ã™ã‚‹ã‹ã€`safety_level` ã‚’ç·©å’Œ            |
| ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°å¤±æ•—   | å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ã¨ç”»åƒå½¢å¼ï¼ˆPNG, JPG ãªã©ï¼‰ã‚’ç¢ºèª                |
| base64 è¡¨ç¤ºã•ã‚Œãªã„ | Claude ãŒå¯¾å¿œã—ã¦ã„ãªã„ã€ã¾ãŸã¯ç”»åƒãŒå¤§ãã™ãã‚‹å¯èƒ½æ€§ã‚ã‚Š              |
| **ç”»åƒç·¨é›†å¤±æ•—**       | **ä»¥ä¸‹ã®ç”»åƒç·¨é›†é–¢é€£ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å‚ç…§**                    |

### ğŸ”§ ç”»åƒç·¨é›†é–¢é€£ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

| ç—‡çŠ¶ | åŸå›  | è§£æ±ºç­– |
|------|------|-------|
| **"The generated mask is of low quality"** | **ç”»åƒå†…å®¹ã«ã‚ˆã‚‹è‡ªå‹•ãƒã‚¹ã‚¯ç”Ÿæˆå¤±æ•—** | **â¶åˆ¥ã®`mask_mode`ã‚’è©¦ã™ï¼ˆbackground â‡” foregroundï¼‰<br>â·`mask_dilation`ã‚’èª¿æ•´ï¼ˆ0.02-0.05ã«æ‹¡å¤§ï¼‰<br>â¸æ‰‹å‹•ãƒã‚¹ã‚¯ç”»åƒã‚’ç”¨æ„ã—`mask_mode: "user_provided"`ã§æŒ‡å®š<br>â¹ç•°ãªã‚‹ç”»åƒã‚„æ§‹å›³ã§å†è©¦è¡Œ** |
| ãƒã‚¹ã‚¯ãŒæœŸå¾…é€šã‚Šã«å‹•ä½œã—ãªã„ | è‡ªå‹•ãƒã‚¹ã‚¯ç”Ÿæˆã®ç²¾åº¦å•é¡Œ | `mask_dilation`ã‚’èª¿æ•´ï¼ˆ0.01-0.05ï¼‰ã€ã¾ãŸã¯æ‰‹å‹•ãƒã‚¹ã‚¯ã«å¤‰æ›´ |
| ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒã‚¹ã‚¯ã‚¨ãƒ©ãƒ¼ | `mask_classes`æœªæŒ‡å®š | `mask_classes: [175, 176]`ãªã©é©åˆ‡ãªã‚¯ãƒ©ã‚¹IDã‚’æŒ‡å®š |
| ç·¨é›†çµæœãŒä¸è‡ªç„¶ | `base_steps`ãŒä¸é©åˆ‡ | é™¤å»: 12-18ã€æŒ¿å…¥: 20-35ã€èƒŒæ™¯ç½®æ›: 20-25 ã«èª¿æ•´ |
| å¢ƒç•ŒãŒã¼ã‚„ã‘ã‚‹ | ãƒã‚¹ã‚¯å¢ƒç•Œã®å•é¡Œ | `mask_dilation`ã‚’å°ã•ãï¼ˆ0.005-0.01ï¼‰ã€ãƒã‚¹ã‚¯ç”»åƒã®è§£åƒåº¦ç¢ºèª |
| ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒåŠ¹ã‹ãªã„ | `guidance_scale`ãŒä½ã„ | `guidance_scale: 15-25`ã«è¨­å®šã€`negative_prompt`ã‚‚ä½µç”¨ |
| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿çµ„ã¿åˆã‚ã›ã‚¨ãƒ©ãƒ¼ | äº’æ›æ€§ã®ãªã„è¨­å®š | `mask_mode: "semantic"`ã«ã¯`mask_classes`å¿…é ˆãªã©ç¢ºèª |
| å‡¦ç†æ™‚é–“ãŒé•·ã„ | `base_steps`ãŒé«˜ã™ãã‚‹ | ç”¨é€”ã«å¿œã˜ã¦é©åˆ‡ãªå€¤ã«èª¿æ•´ï¼ˆä¸Šè¨˜æ¨å¥¨è¡¨ã‚’å‚ç…§ï¼‰ |
| ãƒã‚¹ã‚¯ç”»åƒãŒèª­ã¿è¾¼ã‚ãªã„ | ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ãƒ»ãƒ‘ã‚¹ã®å•é¡Œ | PNGå½¢å¼æ¨å¥¨ã€ãƒ‘ã‚¹ã®ç¢ºèªã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º10MBä»¥ä¸‹ |
| **å…¥åŠ›ç”»åƒãŒè¦‹ã¤ã‹ã‚‰ãªã„ï¼ˆç›¸å¯¾ãƒ‘ã‚¹ï¼‰** | **ç›¸å¯¾ãƒ‘ã‚¹ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰è§£æ±ºã•ã‚Œã¦ã„ãªã„** | **çµ¶å¯¾ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã‹ã€`VERTEXAI_IMAGEN_OUTPUT_DIR`é…ä¸‹ã«ç”»åƒã‚’é…ç½®** |

---

## ğŸ“– ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã¨ç’°å¢ƒå¤‰æ•°

```bash
vertexai-imagen-mcp-server --help
vertexai-imagen-mcp-server --version
```

| å¤‰æ•°å                              | å¿…é ˆ | èª¬æ˜                          |
| -------------------------------- | -- | --------------------------- |
| `GOOGLE_APPLICATION_CREDENTIALS` | âœ…  | ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆJSONã®çµ¶å¯¾ãƒ‘ã‚¹          |
| `GOOGLE_SERVICE_ACCOUNT_KEY`     | âœ…  | JSONæ–‡å­—åˆ—ã¨ã—ã¦ç›´æ¥æ¸¡ã™ï¼ˆä»£æ›¿æ‰‹æ®µï¼‰        |
| `GOOGLE_PROJECT_ID`              | âŒ  | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDï¼ˆé€šå¸¸ã¯è‡ªå‹•å–å¾—ï¼‰           |
| `GOOGLE_REGION`                  | âŒ  | åˆ©ç”¨ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆä¾‹: asia-northeast1ï¼‰ |
| `VERTEXAI_IMAGEN_OUTPUT_DIR`     | âŒ  | ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä¿å­˜å…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆçœç•¥æ™‚: ~/Downloads/vertexai-imagen-filesï¼‰ |
| `VERTEXAI_IMAGEN_TEMPLATES_DIR`  | âŒ  | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä¿å­˜å…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆçœç•¥æ™‚: `[VERTEXAI_IMAGEN_OUTPUT_DIR]/templates`ï¼‰ |
| `VERTEXAI_IMAGEN_THUMBNAIL`      | âŒ  | ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆã®æœ‰åŠ¹åŒ–ï¼ˆ`true`ã§æœ‰åŠ¹ã€çœç•¥æ™‚: ç„¡åŠ¹ï¼‰ã€‚ç´„30-50ãƒˆãƒ¼ã‚¯ãƒ³/ç”»åƒæ¶ˆè²» |
| `VERTEXAI_IMAGEN_DB`             | âŒ  | å±¥æ­´ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ï¼ˆçœç•¥æ™‚: `[VERTEXAI_IMAGEN_OUTPUT_DIR]/data/vertexai-imagen.db`ï¼‰ |
| `VERTEXAI_IMAGEN_EMBED_METADATA` | âŒ  | ç”»åƒã¸ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿åŸ‹ã‚è¾¼ã¿ï¼ˆçœç•¥æ™‚: trueï¼‰ã€‚`false` ã¾ãŸã¯ `0` ã§ç„¡åŠ¹åŒ– |
| `VERTEXAI_IMAGEN_METADATA_LEVEL` | âŒ  | ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿åŸ‹ã‚è¾¼ã¿ãƒ¬ãƒ™ãƒ«: `minimal`, `standard`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰, `full` |
| `DEBUG`                          | âŒ  | "1" ã‚’æŒ‡å®šã™ã‚‹ã¨ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°æœ‰åŠ¹          |

---

## ğŸ“œ å±¥æ­´ç®¡ç†ãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ©Ÿèƒ½

ã“ã®MCPã‚µãƒ¼ãƒãƒ¼ã¯ã€ç”Ÿæˆã—ãŸç”»åƒã®å±¥æ­´ã‚’è‡ªå‹•çš„ã«è¨˜éŒ²ã—ã€å¾Œã‹ã‚‰æ¤œç´¢ãƒ»å‚ç…§ã§ãã‚‹å¼·åŠ›ãªå±¥æ­´ç®¡ç†æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

### ä¸»ãªæ©Ÿèƒ½

- âœ… **è‡ªå‹•å±¥æ­´è¨˜éŒ²**: ã™ã¹ã¦ã®ç”»åƒç”Ÿæˆã‚’SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è‡ªå‹•ä¿å­˜
- âœ… **UUIDè¿½è·¡**: å„ç”»åƒã«ä¸€æ„ã®UUIDã‚’å‰²ã‚Šå½“ã¦ã€ç”»åƒã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ç´ä»˜ã‘
- âœ… **ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿åŸ‹ã‚è¾¼ã¿**: ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«è‡ªä½“ã«UUIDã‚„ç”Ÿæˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’åŸ‹ã‚è¾¼ã¿ï¼ˆPNG/JPEG/WebPå¯¾å¿œï¼‰
- âœ… **ãƒ•ãƒ«ãƒ†ã‚­ã‚¹ãƒˆæ¤œç´¢**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§é«˜é€Ÿæ¤œç´¢
- âœ… **æ•´åˆæ€§æ¤œè¨¼**: ãƒãƒƒã‚·ãƒ¥å€¤ã«ã‚ˆã‚‹ç”»åƒã®æ”¹ã–ã‚“æ¤œå‡º

### å±¥æ­´ç®¡ç†ãƒ„ãƒ¼ãƒ«

| ãƒ„ãƒ¼ãƒ«å | èª¬æ˜ |
|---------|------|
| `list_history` | ç”»åƒç”Ÿæˆå±¥æ­´ã®ä¸€è¦§è¡¨ç¤ºï¼ˆãƒ•ã‚£ãƒ«ã‚¿ã€ã‚½ãƒ¼ãƒˆã€ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰ |
| `get_history_by_uuid` | UUIDæŒ‡å®šã§ç”»åƒã®è©³ç´°æƒ…å ±ã‚’å–å¾— |
| `search_history` | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ãƒ•ãƒ«ãƒ†ã‚­ã‚¹ãƒˆæ¤œç´¢ |
| `get_metadata_from_image` | ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰åŸ‹ã‚è¾¼ã¾ã‚ŒãŸãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚Šãƒ»æ¤œè¨¼ |

### ä½¿ç”¨ä¾‹

```text
# æœ€è¿‘ã®å±¥æ­´ã‚’è¡¨ç¤º
ã€Œæœ€è¿‘ç”Ÿæˆã—ãŸç”»åƒã®å±¥æ­´ã‚’10ä»¶è¡¨ç¤ºã—ã¦ãã ã•ã„ã€

# ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢
ã€Œ"sunset"ã¨ã„ã†ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ç”»åƒã‚’æ¤œç´¢ã—ã¦ã€

# ç”»åƒã‹ã‚‰ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚‹
ã€Œsunset.pngã«åŸ‹ã‚è¾¼ã¾ã‚ŒãŸãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã£ã¦ã€

# ç‰¹å®šã®UUIDã§è©³ç´°ç¢ºèª
ã€ŒUUID abc123... ã®ç”»åƒã®è©³ç´°æƒ…å ±ã‚’æ•™ãˆã¦ã€
```

### è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

å±¥æ­´æ©Ÿèƒ½ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š

ğŸ“– **[å±¥æ­´æ©Ÿèƒ½ãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚¬ã‚¤ãƒ‰](./docs/HISTORY_FEATURES.md)**

- ç’°å¢ƒå¤‰æ•°ã®è©³ç´°èª¬æ˜
- ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿åŸ‹ã‚è¾¼ã¿ã®ä»•çµ„ã¿
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
- ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

---

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ‘ã‚¹ã«ã¤ã„ã¦

### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ä¿å­˜å…ˆ

ã“ã®MCPã‚µãƒ¼ãƒãƒ¼ã¯ã€Claude Desktopãªã©ã®MCPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒã§å‹•ä½œã™ã‚‹ã“ã¨ã‚’è€ƒæ…®ã—ã€ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œã®ãƒ‘ã‚¹å‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä¿å­˜å…ˆ**: `~/Downloads/vertexai-imagen-files/`

- macOS: `/Users/username/Downloads/vertexai-imagen-files/`
- Windows: `C:\Users\username\Downloads\vertexai-imagen-files\`
- Linux: `/home/username/Downloads/vertexai-imagen-files/`

### ãƒ‘ã‚¹æŒ‡å®šã®æ–¹æ³•

#### 1. ç›¸å¯¾ãƒ‘ã‚¹ã‚’æŒ‡å®šï¼ˆæ¨å¥¨ï¼‰
```text
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã«ä¿å­˜ã•ã‚Œã‚‹
output_path: "my_image.png"
â†’ ~/Downloads/vertexai-imagen-files/my_image.png

# ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚‚è‡ªå‹•ä½œæˆã•ã‚Œã‚‹
output_path: "animals/cat.png"
â†’ ~/Downloads/vertexai-imagen-files/animals/cat.png
```

#### 2. çµ¶å¯¾ãƒ‘ã‚¹ã‚’æŒ‡å®š
```text
# çµ¶å¯¾ãƒ‘ã‚¹ã¯ãã®ã¾ã¾ä½¿ç”¨ã•ã‚Œã‚‹
output_path: "/Users/username/Desktop/image.png"
â†’ /Users/username/Desktop/image.png

# Windowsã®å ´åˆ
output_path: "C:\\Users\\username\\Pictures\\image.png"
â†’ C:\Users\username\Pictures\image.png
```

#### 3. ç’°å¢ƒå¤‰æ•°ã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
```json
{
  "mcpServers": {
    "google-imagen": {
      "command": "vertexai-imagen-mcp-server",
      "env": {
        "GOOGLE_APPLICATION_CREDENTIALS": "/path/to/key.json",
        "VERTEXAI_IMAGEN_OUTPUT_DIR": "/Users/username/MyImages"
      }
    }
  }
}
```

ã“ã®è¨­å®šã«ã‚ˆã‚Šã€ç›¸å¯¾ãƒ‘ã‚¹ã¯ `/Users/username/MyImages/` é…ä¸‹ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

### è‡ªå‹•æ©Ÿèƒ½

âœ… **è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®è‡ªå‹•ä½œæˆ**: æŒ‡å®šã•ã‚ŒãŸãƒ‘ã‚¹ã®è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã—ãªã„å ´åˆã€è‡ªå‹•çš„ã«ä½œæˆã•ã‚Œã¾ã™
âœ… **ãƒ‘ã‚¹æ¤œè¨¼**: APIå‘¼ã³å‡ºã—å‰ã«ãƒ‘ã‚¹ã‚’æ¤œè¨¼ã™ã‚‹ãŸã‚ã€APIã‚¯ã‚©ãƒ¼ã‚¿ã®ç„¡é§„é£ã„ã‚’é˜²æ­¢
âœ… **ãƒ•ã‚¡ã‚¤ãƒ«åé‡è¤‡ãƒã‚§ãƒƒã‚¯**: åŒåãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€è‡ªå‹•çš„ã«é€£ç•ªã‚’ä»˜åŠ ï¼ˆä¾‹: `image.png` â†’ `image_1.png` â†’ `image_2.png`ï¼‰
âœ… **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªè¡¨ç¤º**: ä¿å­˜å…ˆã¯ `~` è¡¨è¨˜ã§è¡¨ç¤ºã•ã‚Œã¾ã™ï¼ˆä¾‹: `~/Downloads/vertexai-imagen-files/image.png`ï¼‰

#### ãƒ•ã‚¡ã‚¤ãƒ«åé‡è¤‡ã®è‡ªå‹•å‡¦ç†

åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«åã§è¤‡æ•°å›ç”»åƒã‚’ç”Ÿæˆã—ãŸå ´åˆã€æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿è­·ã™ã‚‹ãŸã‚è‡ªå‹•çš„ã«é€£ç•ªãŒä»˜åŠ ã•ã‚Œã¾ã™ï¼š

```text
# 1å›ç›®ã®ç”Ÿæˆ
output_path: "landscape.png"
â†’ ~/Downloads/vertexai-imagen-files/landscape.png

# 2å›ç›®ã®ç”Ÿæˆï¼ˆåŒã˜ãƒ•ã‚¡ã‚¤ãƒ«åï¼‰
output_path: "landscape.png"
â†’ ~/Downloads/vertexai-imagen-files/landscape_1.png

# 3å›ç›®ã®ç”Ÿæˆ
output_path: "landscape.png"
â†’ ~/Downloads/vertexai-imagen-files/landscape_2.png
```

ã“ã®æ©Ÿèƒ½ã«ã‚ˆã‚Šã€æ—¢å­˜ã®ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ãŒèª¤ã£ã¦ä¸Šæ›¸ãã•ã‚Œã‚‹ãƒªã‚¹ã‚¯ãŒãªããªã‚Šã¾ã™ã€‚

### ğŸ“¥ å…¥åŠ›ç”»åƒãƒ‘ã‚¹ã®æ‰±ã„ï¼ˆedit_image / upscale_imageï¼‰

**v0.5.0ã‹ã‚‰æ”¹å–„**: å…¥åŠ›ç”»åƒãƒ‘ã‚¹ï¼ˆ`reference_image_path`, `mask_image_path`, `input_path`ï¼‰ã‚‚å‡ºåŠ›ãƒ‘ã‚¹ã¨åŒæ§˜ã®è§£æ±ºæ–¹æ³•ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚

#### ãƒ‘ã‚¹è§£æ±ºãƒ«ãƒ¼ãƒ«

```text
# âœ… ç›¸å¯¾ãƒ‘ã‚¹æŒ‡å®šï¼ˆæ¨å¥¨ï¼‰
reference_image_path: "street_wires.png"
â†’ ~/Downloads/vertexai-imagen-files/street_wires.png ã‹ã‚‰èª­ã¿è¾¼ã¿

# âœ… çµ¶å¯¾ãƒ‘ã‚¹æŒ‡å®š
reference_image_path: "C:\\Users\\username\\Pictures\\image.png"
â†’ æŒ‡å®šã•ã‚ŒãŸãƒ‘ã‚¹ãã®ã¾ã¾ã‹ã‚‰èª­ã¿è¾¼ã¿

# âŒ ãƒãƒ«ãƒ€è¨˜æ³•ã¯éå¯¾å¿œ
reference_image_path: "~/Downloads/image.png"
â†’ ã‚¨ãƒ©ãƒ¼ï¼ˆå±•é–‹ã•ã‚Œã¾ã›ã‚“ï¼‰
```

#### æ¨å¥¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

1. **ç”Ÿæˆ**: `generate_image` ã§ç›¸å¯¾ãƒ‘ã‚¹æŒ‡å®š â†’ `VERTEXAI_IMAGEN_OUTPUT_DIR`ã«ä¿å­˜
2. **ç·¨é›†**: åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ç›¸å¯¾ãƒ‘ã‚¹ã§æŒ‡å®š â†’ è‡ªå‹•çš„ã«åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰èª­ã¿è¾¼ã¿

```text
# ä¾‹: ç”»åƒç”Ÿæˆ â†’ ç·¨é›†ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
1. generate_image â†’ output_path: "cat.png"
   ä¿å­˜å…ˆ: ~/Downloads/vertexai-imagen-files/cat.png

2. edit_image â†’ reference_image_path: "cat.png"
   èª­ã¿è¾¼ã¿å…ƒ: ~/Downloads/vertexai-imagen-files/cat.pngï¼ˆè‡ªå‹•è§£æ±ºï¼‰
```

#### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

**ã‚¨ãƒ©ãƒ¼: "Reference image file could not be read from path: ..."**

- ç›¸å¯¾ãƒ‘ã‚¹ã®å ´åˆã€`VERTEXAI_IMAGEN_OUTPUT_DIR`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `~/Downloads/vertexai-imagen-files/`ï¼‰ã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹ã¨ã—ã¦è§£é‡ˆã•ã‚Œã¾ã™
- ç•°ãªã‚‹å ´æ‰€ã®ç”»åƒã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€**çµ¶å¯¾ãƒ‘ã‚¹**ã§æŒ‡å®šã—ã¦ãã ã•ã„
- `list_generated_images` ãƒ„ãƒ¼ãƒ«ã§ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç¢ºèªã§ãã¾ã™

---

## âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### ğŸ–¼ï¸ ç”»åƒè¿”å´ãƒ¢ãƒ¼ãƒ‰ã®é¸æŠ

ã“ã®MCPã‚µãƒ¼ãƒãƒ¼ã¯2ã¤ã®ç”»åƒè¿”å´ãƒ¢ãƒ¼ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ï¼š

#### 1. ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ¢ãƒ¼ãƒ‰ï¼ˆæ¨å¥¨ï¼‰âœ…

```text
return_base64: false  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
```

**ãƒ¡ãƒªãƒƒãƒˆ:**
- âš¡ **ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ãŒå°‘ãªã„**: MCPãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã®é€šä¿¡é‡ã‚’å¤§å¹…å‰Šæ¸›
- ğŸ“ **ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†ãŒå®¹æ˜“**: ç”Ÿæˆã—ãŸç”»åƒã‚’ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜
- ğŸ’¾ **å¤§ããªç”»åƒã‚‚æ‰±ãˆã‚‹**: ã‚µã‚¤ã‚ºåˆ¶é™ã‚’æ°—ã«ã›ãšé«˜è§£åƒåº¦ç”»åƒã‚’ç”Ÿæˆå¯èƒ½
- ğŸ”„ **å†åˆ©ç”¨ãŒç°¡å˜**: ä¿å­˜ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»–ã®ãƒ„ãƒ¼ãƒ«ã§ã‚‚ä½¿ç”¨å¯èƒ½

**æ¨å¥¨ã•ã‚Œã‚‹ç”¨é€”:**
- é€šå¸¸ã®ç”»åƒç”Ÿæˆ
- ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ï¼ˆé«˜è§£åƒåº¦åŒ–ï¼‰
- æœ¬ç•ªç’°å¢ƒã§ã®ä½¿ç”¨
- è¤‡æ•°ç”»åƒã®ç”Ÿæˆ

#### 2. Base64è¿”å´ãƒ¢ãƒ¼ãƒ‰

```text
return_base64: true
```

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:**
- âš ï¸ **ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ãŒå¤§ãã„**: 1ç”»åƒã‚ãŸã‚Šç´„1,500ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ï¼ˆç´„1,000èªç›¸å½“ï¼‰
- ğŸ“ **ã‚µã‚¤ã‚ºåˆ¶é™**: MCPãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã¯1MBæœªæº€æ¨å¥¨
- ğŸŒ **é€šä¿¡é‡å¢—åŠ **: Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚Šå…ƒã®ã‚µã‚¤ã‚ºã®ç´„133%ã«å¢—åŠ 
- ğŸ’¬ **ä¼šè©±å±¥æ­´ã®åœ§è¿«**: é•·æ™‚é–“ã®ä¼šè©±ã§ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’æ¶ˆè²»

**æ³¨æ„äº‹é …:**
> ã“ã®ãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ç”Ÿæˆç”»åƒãŒBase64æ–‡å­—åˆ—ã¨ã—ã¦MCPãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å«ã¾ã‚Œã‚‹ãŸã‚ã€å¤§é‡ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ¶ˆè²»ã—ã¾ã™ã€‚
> `annotations.audience: ["user"]` ã«ã‚ˆã‚Šç”»åƒã¯LLMã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰ã¯é™¤å¤–ã•ã‚Œã¾ã™ãŒã€MCPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸ã®è»¢é€æ™‚ã®ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ã¯å‰Šæ¸›ã§ãã¾ã›ã‚“ã€‚

**é™å®šçš„ãªç”¨é€”:**
- ä¸€æ™‚çš„ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
- ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚¢ã‚¯ã‚»ã‚¹ãŒåˆ¶é™ã•ã‚Œã‚‹ç‰¹æ®Šãªç’°å¢ƒ

### ğŸ“Š ãƒ¢ãƒ¼ãƒ‰æ¯”è¼ƒè¡¨

| é …ç›® | ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ¢ãƒ¼ãƒ‰ | Base64è¿”å´ãƒ¢ãƒ¼ãƒ‰ |
|------|------------------|-----------------|
| ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²» | æœ€å°ï¼ˆ~100ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰ | å¤§ï¼ˆ~1,500ãƒˆãƒ¼ã‚¯ãƒ³/ç”»åƒï¼‰ |
| ã‚µã‚¤ã‚ºåˆ¶é™ | ãªã— | 1MBæœªæº€æ¨å¥¨ |
| ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç† | âœ… ç°¡å˜ | âŒ ä¸å¯ |
| è»¢é€é€Ÿåº¦ | âš¡ é«˜é€Ÿ | ğŸŒ ä½é€Ÿ |
| æ¨å¥¨åº¦ | â­â­â­â­â­ | â­â­ |

### ğŸ’¡ æ¨å¥¨äº‹é …

**âœ… ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆï¼ˆæ¨å¥¨ï¼‰:**
```text
# æŒ‡ç¤ºä¾‹
ã€Œç¾ã—ã„å¤•æ—¥ã®é¢¨æ™¯ã‚’ç”Ÿæˆã—ã¦ã€sunset.pngã¨ã—ã¦ä¿å­˜ã—ã¦ãã ã•ã„ã€
```

**âš ï¸ Base64ãƒ¢ãƒ¼ãƒ‰ã¯é¿ã‘ã‚‹:**
```text
# éæ¨å¥¨ã®æŒ‡ç¤ºä¾‹
ã€Œreturn_base64ã‚’trueã«ã—ã¦ç”Ÿæˆã—ã¦ãã ã•ã„ã€
â†’ ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ãŒå¤§ãã„ãŸã‚ã€ç‰¹åˆ¥ãªç†ç”±ãŒãªã„é™ã‚Šä½¿ç”¨ã—ãªã„ã§ãã ã•ã„
```

### ğŸ” MCP Resources APIï¼ˆv0.4.0+ï¼‰

**âœ… å®Ÿè£…æ¸ˆã¿**ï¼šã“ã®ã‚µãƒ¼ãƒãƒ¼ã¯ MCP Resources API ã«å®Œå…¨å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

Model Context Protocolã®ä»•æ§˜ã«æº–æ‹ ã—ã€ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’æä¾›ï¼š

- **file:// URIã«ã‚ˆã‚‹ç”»åƒé…ä¿¡**: ç”Ÿæˆã•ã‚ŒãŸç”»åƒã¯è‡ªå‹•çš„ã« `file://` URI ã¨ã—ã¦è¿”å´
- **ãƒªã‚½ãƒ¼ã‚¹ä¸€è¦§å–å¾—**: `resources/list` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§å…¨ç”Ÿæˆç”»åƒã‚’åˆ—æŒ™
- **ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰å–å¾—**: `resources/read` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’å¿…è¦æ™‚ã®ã¿å–å¾—
- **ãƒˆãƒ¼ã‚¯ãƒ³åŠ¹ç‡åŒ–**: ç”»åƒãƒ‡ãƒ¼ã‚¿ã¯URIå‚ç…§ã®ã¿ã§è¿”å´ã•ã‚Œã‚‹ãŸã‚ã€ç´„1,500ãƒˆãƒ¼ã‚¯ãƒ³/ç”»åƒã‚’å‰Šæ¸›

#### åˆ©ç”¨æ–¹æ³•

ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«Resources APIçµŒç”±ã§ç”»åƒãŒæä¾›ã•ã‚Œã¾ã™ï¼š

```text
# ç”»åƒç”Ÿæˆå¾Œã€ä»¥ä¸‹ã®æƒ…å ±ãŒè¿”å´ã•ã‚Œã¾ã™:
âœ… file:// URIï¼ˆä¾‹: file:///Users/username/Downloads/vertexai-imagen-files/sunset.pngï¼‰
âœ… MCP Resources APIã§å‚ç…§å¯èƒ½
âœ… ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ã‚’æœ€å°åŒ–
```

> ğŸ“š å‚è€ƒ: [MCP Specification - Resources](https://modelcontextprotocol.io/specification/2025-06-18/server/resources)

#### Base64ãƒ¢ãƒ¼ãƒ‰ã®éæ¨å¥¨åŒ–

**âš ï¸ é‡è¦**: `return_base64=true` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ **v1.0.0ã§å‰Šé™¤äºˆå®š** ã§ã™ã€‚

- ç¾åœ¨ã¯äº’æ›æ€§ã®ãŸã‚ç¶­æŒã•ã‚Œã¦ã„ã¾ã™ãŒã€ä½¿ç”¨ã¯æ¨å¥¨ã•ã‚Œã¾ã›ã‚“
- Resources API ã‚’ä½¿ç”¨ã—ãŸfile:// URIé…ä¿¡ãŒæ¨™æº–ã¨ãªã‚Šã¾ã™
- æ—¢å­˜ã®Base64ãƒ¢ãƒ¼ãƒ‰åˆ©ç”¨è€…ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ¢ãƒ¼ãƒ‰ã¸ã®ç§»è¡Œã‚’æ¨å¥¨

### ğŸ–¼ï¸ ã‚µãƒ ãƒã‚¤ãƒ«æ©Ÿèƒ½ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

**âœ¨ æ–°æ©Ÿèƒ½**: ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨ã®ã‚µãƒ ãƒã‚¤ãƒ«è‡ªå‹•ç”Ÿæˆã«å¯¾å¿œã—ã¾ã—ãŸã€‚

#### æ©Ÿèƒ½æ¦‚è¦

ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ¢ãƒ¼ãƒ‰ã§ç”»åƒã‚’ç”Ÿæˆã™ã‚‹éš›ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å°ã•ãªã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã‚’ç”Ÿæˆã—ã€å³åº§ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºã§ãã¾ã™ã€‚

#### æœ‰åŠ¹åŒ–æ–¹æ³•

**æ–¹æ³•1: ç’°å¢ƒå¤‰æ•°ã§å…¨ä½“çš„ã«æœ‰åŠ¹åŒ–ï¼ˆæ¨å¥¨ï¼‰**

```json
{
  "mcpServers": {
    "google-imagen": {
      "command": "vertexai-imagen-mcp-server",
      "env": {
        "GOOGLE_APPLICATION_CREDENTIALS": "/path/to/key.json",
        "VERTEXAI_IMAGEN_THUMBNAIL": "true"
      }
    }
  }
}
```

**æ–¹æ³•2: ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—æ™‚ã«å€‹åˆ¥æŒ‡å®š**

```text
# ã‚µãƒ ãƒã‚¤ãƒ«æœ‰åŠ¹ã§ç”Ÿæˆ
include_thumbnail: true

# ã‚µãƒ ãƒã‚¤ãƒ«ç„¡åŠ¹ã§ç”Ÿæˆ
include_thumbnail: false

# æœªæŒ‡å®šã®å ´åˆã¯ç’°å¢ƒå¤‰æ•°ã®è¨­å®šã«å¾“ã†
```

#### ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»

| ãƒ¢ãƒ¼ãƒ‰ | ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²» | ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º | æ¨å¥¨åº¦ |
|--------|-------------|--------------|--------|
| **file:// URI ã®ã¿ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰** | ~100ãƒˆãƒ¼ã‚¯ãƒ³ | âŒ ãªã— | â­â­â­â­â­ **æ¨å¥¨** |
| file:// URI + ã‚µãƒ ãƒã‚¤ãƒ« | ~130-150ãƒˆãƒ¼ã‚¯ãƒ³ | âœ… å³åº§ã«è¡¨ç¤º | â­â­â­â­ |
| Base64ãƒ•ãƒ«ç”»åƒï¼ˆéæ¨å¥¨ï¼‰ | ~1,500ãƒˆãƒ¼ã‚¯ãƒ³ | âœ… ãƒ•ãƒ«ç”»åƒ | â­ |

#### ã‚µãƒ ãƒã‚¤ãƒ«ä»•æ§˜

- **ã‚µã‚¤ã‚º**: æœ€å¤§128Ã—128ãƒ”ã‚¯ã‚»ãƒ«ï¼ˆã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ç¶­æŒï¼‰
- **å“è³ª**: JPEGå“è³ª60
- **è¿½åŠ ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»**: ç´„30-50ãƒˆãƒ¼ã‚¯ãƒ³/ç”»åƒ
- **å‡¦ç†æ™‚é–“**: ç´„5-30msï¼ˆç”»åƒã‚µã‚¤ã‚ºã«ã‚ˆã‚‹ï¼‰

#### æŠ€è¡“çš„è©³ç´°

- [Sharp](https://sharp.pixelplumbing.com/) ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã‚‹é«˜é€Ÿãƒ»é«˜å“è³ªãªç”»åƒå‡¦ç†
- ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ã‚’ç¶­æŒã—ãŸãƒªã‚µã‚¤ã‚º
- å…ƒç”»åƒã‚ˆã‚Šå¤§ããã—ãªã„åˆ¶å¾¡
- ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆå¤±æ•—æ™‚ã‚‚æœ¬å‡¦ç†ã¯ç¶™ç¶šï¼ˆã‚¨ãƒ©ãƒ¼éè¡¨ç¤ºï¼‰

#### ä½¿ç”¨ä¾‹

```text
# ç’°å¢ƒå¤‰æ•°ã§æœ‰åŠ¹åŒ–å¾Œ
ã€Œç¾ã—ã„å¤•æ—¥ã®é¢¨æ™¯ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€

â†’ file:// URI ã§é«˜è§£åƒåº¦ç”»åƒã‚’æä¾›
â†’ åŒæ™‚ã«128Ã—128ã®ã‚µãƒ ãƒã‚¤ãƒ«ã‚‚è¡¨ç¤ºï¼ˆå³åº§ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯èƒ½ï¼‰
```

#### æ³¨æ„äº‹é …

âš ï¸ **Claude Desktopã®ãƒˆãƒ¼ã‚¯ãƒ³åˆ¶é™**: 1å›ã®ä¼šè©±ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æœ€å¤§æ–‡å­—æ•°ã«é”ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ãã®å ´åˆã¯ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®å¯¾å¿œã‚’æ¨å¥¨ï¼š
- ã‚µãƒ ãƒã‚¤ãƒ«ã‚’ç„¡åŠ¹åŒ–ï¼ˆ`VERTEXAI_IMAGEN_THUMBNAIL` ã‚’è¨­å®šã—ãªã„ã€ã¾ãŸã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾ï¼‰
- æ–°ã—ã„ãƒãƒ£ãƒƒãƒˆã‚’é–‹å§‹
- file:// URIçµŒç”±ã§ãƒ•ãƒ«ç”»åƒã«ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆMCP Resources APIçµŒç”±ï¼‰

ğŸ’¡ **æ¨å¥¨**: é€šå¸¸ã®ä½¿ç”¨ã§ã¯**ã‚µãƒ ãƒã‚¤ãƒ«ç„¡åŠ¹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰**ã§ååˆ†ã§ã™ã€‚file:// URIã§ãƒ•ãƒ«ç”»åƒã«å³åº§ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

---

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ³¨æ„ç‚¹

* ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ã¯ `.gitignore` ã«è¿½åŠ ã—ã€å…¬é–‹ã—ãªã„ã§ãã ã•ã„
* æœ€å°æ¨©é™ã®åŸå‰‡ã«å¾“ã„ã€`Vertex AI ãƒ¦ãƒ¼ã‚¶ãƒ¼` æ¨©é™ã®ã¿ã‚’ä»˜ä¸
* ä¸è¦ãªã‚­ãƒ¼ã¯å³å‰Šé™¤ã—ã€å¿…è¦ã«å¿œã˜ã¦å®šæœŸçš„ã«ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¦ãã ã•ã„

---

## ğŸ’° æ–™é‡‘ã«ã¤ã„ã¦

Vertex AI ã® Generative AI ãƒ¢ãƒ‡ãƒ«ã®ä¸€éƒ¨ã‚’åˆ©ç”¨ã—ã¦ãŠã‚Šã€**å¾“é‡èª²é‡‘åˆ¶**ã§ã™ã€‚

- æœ€æ–°ã®ä¾¡æ ¼ã¯ä»¥ä¸‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š  
  [https://cloud.google.com/vertex-ai/generative-ai/pricing?hl=ja](https://cloud.google.com/vertex-ai/generative-ai/pricing?hl=ja)

- ä¾¡æ ¼ä¾‹ï¼ˆ2025å¹´7æœˆæ™‚ç‚¹ã€å¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ã‚ã‚Šï¼‰:
  - Imagen 3ï¼ˆç”»åƒç”Ÿæˆï¼‰: ç´„ **$0.040 / ç”»åƒ**
  - ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°å‡¦ç†ã‚‚åˆ¥é€”èª²é‡‘å¯¾è±¡ã¨ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™

### ç„¡æ–™æ ã«ã¤ã„ã¦

- **Google Cloud ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«**ï¼šæ–°è¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã« $300 ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆï¼ˆ90æ—¥é–“ï¼‰ä»˜ä¸
- Vertex AI è‡ªä½“ã«ã¯å¸¸è¨­ã®ç„¡æ–™æ ã¯ã‚ã‚Šã¾ã›ã‚“

> âš ï¸ å®Ÿéš›ã®æ–™é‡‘ã‚„ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã®ä¾¡æ ¼å¤‰å‹•ã€èª²é‡‘å˜ä½ãªã©ã¯å¿…ãšå…¬å¼ã‚µã‚¤ãƒˆã§ã”ç¢ºèªãã ã•ã„ã€‚


## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³æ­“è¿

1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆï¼ˆä¾‹: `feature/add-func`ï¼‰
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥
4. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡

---

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT Licenseï¼ˆè©³ç´°ã¯ `LICENSE` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ï¼‰

---

## ğŸ™ è¬è¾

* [Model Context Protocol](https://modelcontextprotocol.io/)
* [Google Cloud Vertex AI Imagen](https://cloud.google.com/vertex-ai/generative-ai/docs/image/overview)


